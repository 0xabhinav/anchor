import{PublicKey as e,SYSVAR_RENT_PUBKEY as t,SystemProgram as n,SYSVAR_CLOCK_PUBKEY as r,SendTransactionError as o,TransactionInstruction as i,Transaction as s}from"@solana/web3.js";import a,{Buffer as c}from"buffer";import u from"bn.js";import l from"bs58";import d from"camelcase";import*as h from"@coral-xyz/borsh";import{sha256 as p}from"@noble/hashes/sha256";import{inflate as f}from"pako";import m from"eventemitter3";const y=e=>"version"in e;function g(e){return l.encode(e)}function w(e){return e.toString("base64")}function v(e){return c.from(e,"base64")}function b(e,...t){if(e.args.length!=t.length)throw new Error("Invalid argument length");const n={};let r=0;return e.args.forEach((e=>{n[e.name]=t[r],r+=1})),n}function E(e,t={}){e.forEach((e=>{if("accounts"in e)E(e.accounts,t[e.name]);else if(void 0===t[e.name])throw new Error(`Invalid arguments: ${e.name} not provided.`)}))}function A(t){return t instanceof e?t:new e(t)}class _ extends TypeError{constructor(e,t){let n;const{message:r,...o}=e,{path:i}=e;super(0===i.length?r:"At path: "+i.join(".")+" -- "+r),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var r;return null!=(r=n)?r:n=[e,...t()]}}}function S(e){return"object"==typeof e&&null!=e}function x(e){return"string"==typeof e?JSON.stringify(e):""+e}function I(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:o,branch:i}=t,{type:s}=n,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+x(r)+"`"}=e;return{value:r,type:s,refinement:a,key:o[o.length-1],path:o,branch:i,...e,message:c}}function*k(e,t,n,r){(function(e){return S(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const o of e){const e=I(o,t,n,r);e&&(yield e)}}function*T(e,t,n){void 0===n&&(n={});const{path:r=[],branch:o=[e],coerce:i=!1,mask:s=!1}=n,a={path:r,branch:o};if(i&&(e=t.coercer(e,a),s&&"type"!==t.type&&S(t.schema)&&S(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let c=!0;for(const n of t.validator(e,a))c=!1,yield[n,void 0];for(let[n,u,l]of t.entries(e,a)){const t=T(u,l,{path:void 0===n?r:[...r,n],branch:void 0===n?o:[...o,u],coerce:i,mask:s});for(const r of t)r[0]?(c=!1,yield[r[0],void 0]):i&&(u=r[1],void 0===n?e=u:e instanceof Map?e.set(n,u):e instanceof Set?e.add(u):S(e)&&(e[n]=u))}if(c)for(const n of t.refiner(e,a))c=!1,yield[n,void 0];c&&(yield[void 0,e])}class L{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:r,refiner:o,coercer:i=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=n,this.entries=s,this.coercer=i,this.validator=r?(e,t)=>k(r(e,t),t,this,e):()=>[],this.refiner=o?(e,t)=>k(o(e,t),t,this,e):()=>[]}assert(e){return function(e,t){const n=O(e,t);if(n[0])throw n[0]}(e,this)}create(e){return B(e,this)}is(e){return P(e,this)}mask(e){return function(e,t){const n=O(e,t,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}(e,this)}validate(e,t){return void 0===t&&(t={}),O(e,this,t)}}function B(e,t){const n=O(e,t,{coerce:!0});if(n[0])throw n[0];return n[1]}function P(e,t){return!O(e,t)[0]}function O(e,t,n){void 0===n&&(n={});const r=T(e,t,n),o=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(r);if(o[0]){const e=new _(o[0],(function*(){for(const e of r)e[0]&&(yield e[0])}));return[e,void 0]}return[void 0,o[1]]}function M(e,t){return new L({type:e,schema:null,validator:t})}function U(e){return new L({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+x(e)})}function C(e){const t=x(e),n=typeof e;return new L({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||"Expected the literal `"+t+"`, but received: "+x(n)})}function D(e){return new L({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function N(){return M("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+x(e)))}function R(e){return new L({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function F(){return M("string",(e=>"string"==typeof e||"Expected a string, but received: "+x(e)))}function j(e){const t=Object.keys(e);return new L({type:"type",schema:e,*entries(n){if(S(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>S(e)||"Expected an object, but received: "+x(e)})}function V(e){const t=e.map((e=>e.type)).join(" | ");return new L({type:"union",schema:null,coercer(t,n){const r=e.find((e=>{const[n]=e.validate(t,{coerce:!0});return!n}))||$();return r.coercer(t,n)},validator(n,r){const o=[];for(const t of e){const[...e]=T(n,t,r),[i]=e;if(!i[0])return[];for(const[t]of e)t&&o.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+x(n),...o]}})}function $(){return M("unknown",(()=>!0))}async function z(e,t,n){if(t.length<=99)return await q(e,t,n);{const r=function(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map(((n,r)=>e.slice(r*t,(r+1)*t)))}(t,99);return(await Promise.all(r.map((t=>q(e,t,n))))).flat()}}async function q(e,t,n){const r=null!=n?n:e.commitment,{value:o,context:i}=await e.getMultipleAccountsInfoAndContext(t,r);return o.map(((e,n)=>null===e?null:{publicKey:t[n],account:e,context:i}))}function G(e){return function(e,t,n){return new L({...e,coercer:(r,o)=>P(r,t)?e.coercer(n(r,o),o):e.coercer(r,o)})}(W(e),K,(t=>"error"in t?t:{...t,result:B(t.result,e)}))}const K=W($());function W(e){return V([j({jsonrpc:C("2.0"),id:F(),result:e}),j({jsonrpc:C("2.0"),id:F(),error:j({code:$(),message:F(),data:R(M("any",(()=>!0)))})})])}const H=(J=j({err:D(V([j({}),F()])),logs:D(U(F())),accounts:R(D(U(D(j({executable:M("boolean",(e=>"boolean"==typeof e)),owner:F(),lamports:N(),data:U(F()),rentEpoch:R(N())}))))),unitsConsumed:R(N())}),G(j({context:j({slot:N()}),value:J})));var J;class Z{constructor(e,t,n){this.connection=e,this.wallet=t,this.opts=n,this.publicKey=null==t?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,n){var r,i,s,a;if(void 0===n&&(n=this.opts),y(e))t&&e.sign(t);else if(e.feePayer=null!==(r=e.feePayer)&&void 0!==r?r:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(n.preflightCommitment)).blockhash,t)for(const n of t)e.partialSign(n);const c=(e=await this.wallet.signTransaction(e)).serialize();try{return await Q(this.connection,c,n)}catch(t){if(t instanceof Y){const n=g(y(e)?(null===(i=e.signatures)||void 0===i?void 0:i[0])||new Uint8Array:null!==(s=e.signature)&&void 0!==s?s:new Uint8Array),r=await this.connection.getTransaction(n,{commitment:"confirmed"});if(r){const e=null===(a=r.meta)||void 0===a?void 0:a.logMessages;throw e?new o(t.message,e):t}throw t}throw t}}async sendAll(e,t){var n,r,i;void 0===t&&(t=this.opts);const s=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let a=e.map((e=>{var t,n;if(y(e.tx)){let t=e.tx;return e.signers&&t.sign(e.signers),t}{let r=e.tx,o=null!==(t=e.signers)&&void 0!==t?t:[];return r.feePayer=null!==(n=r.feePayer)&&void 0!==n?n:this.wallet.publicKey,r.recentBlockhash=s,o.forEach((e=>{r.partialSign(e)})),r}}));const c=await this.wallet.signAllTransactions(a),u=[];for(let e=0;e<a.length;e+=1){const s=c[e],a=s.serialize();try{u.push(await Q(this.connection,a,t))}catch(e){if(e instanceof Y){const t=g(y(s)?(null===(n=s.signatures)||void 0===n?void 0:n[0])||new Uint8Array:null!==(r=s.signature)&&void 0!==r?r:new Uint8Array),a=await this.connection.getTransaction(t,{commitment:"confirmed"});if(a){const t=null===(i=a.meta)||void 0===i?void 0:i.logMessages;throw t?new o(e.message,t):e}throw e}throw e}}return u}async simulate(e,t,n,r){let i,s=(await this.connection.getLatestBlockhash(null!=n?n:this.connection.commitment)).blockhash;if(y(e)?(t&&t.length>0&&(e.sign(t),e=await this.wallet.signTransaction(e)),i=await this.connection.simulateTransaction(e,{commitment:n})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=s,t&&t.length>0&&(e=await this.wallet.signTransaction(e)),i=await async function(e,t,n,r,i){var s;n&&n.length>0&&t.sign(...n);const a=t._compile(),c=a.serialize(),u=t._serialize(c).toString("base64"),l={encoding:"base64",commitment:null!=r?r:e.commitment};if(i){const e=(Array.isArray(i)?i:a.nonProgramIds()).map((e=>e.toBase58()));l.accounts={encoding:"base64",addresses:e}}n&&n.length>0&&(l.sigVerify=!0);const d=[u,l],h=B(await e._rpcRequest("simulateTransaction",d),H);if("error"in h){let e;if("data"in h.error&&(e=null===(s=h.error.data)||void 0===s?void 0:s.logs,e&&Array.isArray(e))){const t="\n    ",n=t+e.join(t);console.error(h.error.message,n)}throw new o("failed to simulate transaction: "+h.error.message,e)}return h.result}(this.connection,e,t,n,r)),i.value.err)throw new X(i.value);return i.value}}class X extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function Q(e,t,n){const r=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},o=await e.sendRawTransaction(t,r),i=(await e.confirmTransaction(o,n&&n.commitment)).value;if(i.err)throw new Y(`Raw transaction ${o} failed (${JSON.stringify(i)})`);return o}class Y extends Error{constructor(e){super(e)}}function ee(){return Z.local()}const te=new Map;function ne(e){return void 0!==te.get(e)}class re extends Error{constructor(e){super(e),this.name="IdlError"}}class oe{constructor(e){this.stack=e}static parse(t){var n;const r=/^Program (\w*) invoke/,o=/^Program \w* success/,i=[];for(let s=0;s<t.length;s++){if(o.exec(t[s])){i.pop();continue}const a=null===(n=r.exec(t[s]))||void 0===n?void 0:n[1];a&&i.push(new e(a))}return new oe(i)}}class ie extends Error{constructor(e,t,n,r,o,i){super(n.join("\n").replace("Program log: ","")),this.errorLogs=n,this.logs=r,this.error={errorCode:e,errorMessage:t,comparedValues:i,origin:o},this._programErrorStack=oe.parse(r)}static parse(t){if(!t)return null;const n=t.findIndex((e=>e.startsWith("Program log: AnchorError")));if(-1===n)return null;const r=t[n],o=[r];let i;if(n+1<t.length)if("Program log: Left:"===t[n+1]){const r=/^Program log: (.*)$/,s=r.exec(t[n+2])[1],a=r.exec(t[n+4])[1];i=[new e(s),new e(a)],o.push(...t.slice(n+1,n+5))}else if(t[n+1].startsWith("Program log: Left:")){const e=/^Program log: (Left|Right): (.*)$/,r=e.exec(t[n+1])[2],s=e.exec(t[n+2])[2];o.push(...t.slice(n+1,n+3)),i=[r,s]}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),a=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),c=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[e,n,r]=s.slice(1,4),a={code:e,number:parseInt(n)};return new ie(a,r,o,t,void 0,i)}if(a){const[e,n,r,s,c]=a.slice(1,6),u={code:r,number:parseInt(s)},l={file:e,line:parseInt(n)};return new ie(u,c,o,t,l,i)}if(c){const[e,n,r,s]=c.slice(1,5),a=e,u={code:n,number:parseInt(r)};return new ie(u,s,o,t,a,i)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class se extends Error{constructor(e,t,n){super(),this.code=e,this.msg=t,this.logs=n,n&&(this._programErrorStack=oe.parse(n))}static parse(e,t){const n=e.toString();let r,o;if(n.includes("custom program error:")){let e=n.split("custom program error: ");if(2!==e.length)return null;r=e[1]}else{const e=n.match(/"Custom":([0-9]+)}/g);if(!e||e.length>1)return null;r=e[0].match(/([0-9]+)/g)[0]}try{o=parseInt(r)}catch(e){return null}let i=t.get(o);return void 0!==i?new se(o,i,e.logs):(i=ce.get(o),void 0!==i?new se(o,i,e.logs):null)}get program(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return null===(e=this._programErrorStack)||void 0===e?void 0:e.stack}toString(){return this.msg}}function ae(e,t){ne("debug-logs")&&console.log("Translating error:",e);const n=ie.parse(e.logs);if(n)return n;const r=se.parse(e,t);if(r)return r;if(e.logs){const t={get:function(t,n){return"programErrorStack"===n?t.programErrorStack.stack:"program"===n?t.programErrorStack.stack[e.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return e.programErrorStack=oe.parse(e.logs),new Proxy(e,t)}return e}const ce=new Map([[100,"8 byte instruction identifier not provided"],[101,"Fallback functions are not supported"],[102,"The program could not deserialize the given instruction"],[103,"The program could not serialize the given instruction"],[1e3,"The program was compiled without idl instructions"],[1001,"The transaction was given an invalid program for the IDL instruction"],[2e3,"A mut constraint was violated"],[2001,"A has one constraint was violated"],[2002,"A signer constraint was violated"],[2003,"A raw constraint was violated"],[2004,"An owner constraint was violated"],[2005,"A rent exemption constraint was violated"],[2006,"A seeds constraint was violated"],[2007,"An executable constraint was violated"],[2008,"Deprecated Error, feel free to replace with something else"],[2009,"An associated constraint was violated"],[2010,"An associated init constraint was violated"],[2011,"A close constraint was violated"],[2012,"An address constraint was violated"],[2013,"Expected zero account discriminant"],[2014,"A token mint constraint was violated"],[2015,"A token owner constraint was violated"],[2016,"A mint mint authority constraint was violated"],[2017,"A mint freeze authority constraint was violated"],[2018,"A mint decimals constraint was violated"],[2019,"A space constraint was violated"],[2020,"A required account for the constraint is None"],[2500,"A require expression was violated"],[2501,"A require_eq expression was violated"],[2502,"A require_keys_eq expression was violated"],[2503,"A require_neq expression was violated"],[2504,"A require_keys_neq expression was violated"],[2505,"A require_gt expression was violated"],[2506,"A require_gte expression was violated"],[3e3,"The account discriminator was already set on this account"],[3001,"No 8 byte discriminator was found on the account"],[3002,"8 byte discriminator did not match what was expected"],[3003,"Failed to deserialize the account"],[3004,"Failed to serialize the account"],[3005,"Not enough account keys given to the instruction"],[3006,"The given account is not mutable"],[3007,"The given account is owned by a different program than expected"],[3008,"Program ID was not as expected"],[3009,"Program account is not executable"],[3010,"The given account did not sign"],[3011,"The given account is not owned by the system program"],[3012,"The program expected this account to be already initialized"],[3013,"The given account is not a program data account"],[3014,"The given account is not the associated token account"],[3015,"The given public key does not match the required sysvar"],[3016,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[3017,"The account was duplicated for more than one reallocation"],[4100,"The declared program id does not match the actual program id"],[5e3,"The API being used is deprecated and should no longer be used"]]);var ue=function(){return ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ue.apply(this,arguments)},le=function(){return le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},le.apply(this,arguments)};function de(e){return e.toLowerCase()}var he=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],pe=/[^A-Z0-9]+/gi;function fe(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}function me(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?he:n,o=t.stripRegexp,i=void 0===o?pe:o,s=t.transform,a=void 0===s?de:s,c=t.delimiter,u=void 0===c?" ":c,l=fe(fe(e,r,"$1\0$2"),i,"\0"),d=0,h=l.length;"\0"===l.charAt(d);)d++;for(;"\0"===l.charAt(h-1);)h--;return l.slice(d,h).split("\0").map(a).join(u)}(e,le({delimiter:"."},t))}class ye{static fieldLayout(e,t){const n=void 0!==e.name?d(e.name):void 0;switch(e.type){case"bool":return h.bool(n);case"u8":return h.u8(n);case"i8":return h.i8(n);case"u16":return h.u16(n);case"i16":return h.i16(n);case"u32":return h.u32(n);case"i32":return h.i32(n);case"f32":return h.f32(n);case"u64":return h.u64(n);case"i64":return h.i64(n);case"f64":return h.f64(n);case"u128":return h.u128(n);case"i128":return h.i128(n);case"u256":return h.u256(n);case"i256":return h.i256(n);case"bytes":return h.vecU8(n);case"string":return h.str(n);case"publicKey":return h.publicKey(n);default:if("vec"in e.type)return h.vec(ye.fieldLayout({name:void 0,type:e.type.vec},t),n);if("option"in e.type)return h.option(ye.fieldLayout({name:void 0,type:e.type.option},t),n);if("defined"in e.type){if(!t)throw new re("User defined types not provided");const r=e.type.defined,o=t.filter((e=>e.name===r));if(1!==o.length)throw new re(`Type not found: ${JSON.stringify(e)}`);return ye.typeDefLayout(o[0],t,n)}if("array"in e.type){let r=e.type.array[0],o=e.type.array[1],i=ye.fieldLayout({name:void 0,type:r},t);return h.array(i,o,n)}throw new Error(`Not yet implemented: ${e}`)}}static typeDefLayout(e,t=[],n){switch(e.type.kind){case"struct":{const r=e.type.fields.map((e=>ye.fieldLayout(e,t)));return h.struct(r,n)}case"enum":{let r=e.type.variants.map((e=>{const n=d(e.name);if(!e.fields)return h.struct([],n);const r=e.fields.map(((e,n)=>(null==e?void 0:e.name)?ye.fieldLayout(e,t):ye.fieldLayout({type:e,name:n.toString()},t)));return h.struct(r,n)}));return void 0!==n?h.rustEnum(r).replicate(n):h.rustEnum(r,n)}case"alias":return ye.fieldLayout({type:e.type.value,name:e.name},t)}}}const ge="global";class we{constructor(e){this.idl=e,this.ixLayout=we.parseIxLayout(e);const t=new Map;e.instructions.forEach((e=>{const n=be(ge,e.name);t.set(l.encode(n),{layout:this.ixLayout.get(e.name),name:e.name})})),this.sighashLayouts=t}encode(e,t,n){return this._encode(e,t,null!=n?n:be(ge,e))}_encode(e,t,n){const r=c.alloc(1e3),o=d(e),i=this.ixLayout.get(o);if(!i)throw new Error(`Unknown method: ${o}`);const s=i.encode(t,r),a=r.slice(0,s);return c.concat([n,a])}static parseIxLayout(e){const t=e.instructions.map((t=>{let n=t.args.map((t=>{var n,r;return ye.fieldLayout(t,Array.from([...null!==(n=e.accounts)&&void 0!==n?n:[],...null!==(r=e.types)&&void 0!==r?r:[]]))}));const r=d(t.name);return[r,h.struct(n,r)]}));return new Map(t)}decode(e,t="hex",n){"string"==typeof e&&(e="hex"===t?c.from(e,"hex"):l.decode(e));let r=l.encode(n?be(ge,n):e.slice(0,8)),o=e.slice(8);const i=this.sighashLayouts.get(r);return i?{data:i.layout.decode(o),name:i.name}:null}format(e,t){return ve.format(e,t,this.idl)}}class ve{static format(e,t,n){const r=n.instructions.filter((t=>e.name===t.name))[0];if(void 0===r)return console.error("Invalid instruction given"),null;const o=r.args.map((t=>({name:t.name,type:ve.formatIdlType(t.type),data:ve.formatIdlData(t,e.data[t.name],n.types)}))),i=ve.flattenIdlAccounts(r.accounts);return{args:o,accounts:t.map(((e,t)=>t<i.length?{name:i[t].name,...e}:{name:void 0,...e}))}}static formatIdlType(e){if("string"==typeof e)return e;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("defined"in e)return e.defined;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,n){if("string"==typeof e.type)return t.toString();if(e.type.hasOwnProperty("vec"))return"["+t.map((t=>this.formatIdlData({name:"",type:e.type.vec},t,n))).join(", ")+"]";if(e.type.hasOwnProperty("option"))return null===t?"null":this.formatIdlData({name:"",type:e.type.option},t,n);if(e.type.hasOwnProperty("defined")){if(void 0===n)throw new Error("User defined types not provided");const r=n.filter((t=>t.name===e.type.defined));if(1!==r.length)throw new Error(`Type not found: ${e.type.defined}`);return ve.formatIdlDataDefined(r[0],t,n)}return"unknown"}static formatIdlDataDefined(e,t,n){switch(e.type.kind){case"struct":{const r=e.type,o=Object.keys(t).map((e=>{const o=r.fields.find((t=>t.name===e));if(!o)throw new Error("Unable to find type");return e+": "+ve.formatIdlData(o,t[e],n)})).join(", ");return"{ "+o+" }"}case"enum":if(0===e.type.variants.length)return"{}";if(e.type.variants[0].name){const r=e.type.variants,o=Object.keys(t)[0],i=t[o],s=r.find((e=>d(e.name)===o));if(!s)throw new Error(`Unable to find variant \`${o}\``);const a=s.fields,c=Object.keys(i).map((e=>{const t=i[e],r=a.find((t=>t.name===e));if(!r)throw new Error(`Unable to find field \`${e}\``);return e+": "+ve.formatIdlData(r,t,n)})).join(", "),u=d(o,{pascalCase:!0});return 0===c.length?u:`${u} { ${c} }`}return"Tuple formatting not yet implemented";case"alias":return ve.formatIdlType(e.type.value)}}static flattenIdlAccounts(e,t){return e.map((e=>{const n=function(e){const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}(e.name);if(e.hasOwnProperty("accounts")){const r=t?`${t} > ${n}`:n;return ve.flattenIdlAccounts(e.accounts,r)}return{...e,name:t?`${t} > ${n}`:n}})).flat()}}function be(e,t){var n;let r=`${e}:${void 0===n&&(n={}),me(t,ue({delimiter:"_"},n))}`;return c.from(p(r).slice(0,8))}function Ee(e,t){switch(t.type.kind){case"struct":return t.type.fields.map((t=>Ae(e,t.type))).reduce(((e,t)=>e+t),0);case"enum":{const n=t.type.variants.map((t=>t.fields?t.fields.map((t=>Ae(e,"object"==typeof t&&"name"in t?t.type:t))).reduce(((e,t)=>e+t),0):0));return Math.max(...n)+1}case"alias":return Ae(e,t.type.value)}}function Ae(e,t){var n,r;switch(t){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"u256":case"i256":case"publicKey":return 32;default:if("vec"in t)return 1;if("option"in t)return 1+Ae(e,t.option);if("coption"in t)return 4+Ae(e,t.coption);if("defined"in t){const o=null!==(r=null===(n=e.types)||void 0===n?void 0:n.filter((e=>e.name===t.defined)))&&void 0!==r?r:[];if(1!==o.length)throw new re(`Type not found: ${JSON.stringify(t)}`);return Ee(e,o[0])}if("array"in t){let n=t.array[0],r=t.array[1];return Ae(e,n)*r}throw new Error(`Invalid type ${JSON.stringify(t)}`)}}function _e(e){return Buffer.from(p(e).slice(0,8))}class Se{constructor(e){if(void 0===e.accounts)return void(this.accountLayouts=new Map);const t=e.accounts.map((t=>[t.name,ye.typeDefLayout(t,e.types)]));this.accountLayouts=new Map(t),this.idl=e}async encode(e,t){const n=c.alloc(1e3),r=this.accountLayouts.get(e);if(!r)throw new Error(`Unknown account: ${e}`);const o=r.encode(t,n);let i=n.slice(0,o),s=Se.accountDiscriminator(e);return c.concat([s,i])}decode(e,t){if(Se.accountDiscriminator(e).compare(t.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){const t=e.slice(0,8),n=Array.from(this.accountLayouts.keys()).find((e=>Se.accountDiscriminator(e).equals(t)));if(!n)throw new Error("Account descriminator not found");return this.decodeUnchecked(n,e)}decodeUnchecked(e,t){const n=t.subarray(8),r=this.accountLayouts.get(e);if(!r)throw new Error(`Unknown account: ${e}`);return r.decode(n)}memcmp(e,t){const n=Se.accountDiscriminator(e);return{offset:0,bytes:l.encode(t?c.concat([n,t]):n)}}size(e){var t;return 8+(null!==(t=Ee(this.idl,e))&&void 0!==t?t:0)}static accountDiscriminator(e){return _e(`account:${d(e,{pascalCase:!0,preserveConsecutiveUppercase:!0})}`)}}class xe{constructor(e){if(void 0===e.events)return void(this.layouts=new Map);const t=e.events.map((t=>{let n={name:t.name,type:{kind:"struct",fields:t.fields.map((e=>({name:e.name,type:e.type})))}};return[t.name,ye.typeDefLayout(n,e.types)]}));this.layouts=new Map(t),this.discriminators=new Map(void 0===e.events?[]:e.events.map((e=>{return[w((t=e.name,_e(`event:${t}`))),e.name];var t})))}decode(e){let t;try{t=v(e)}catch(e){return null}const n=w(t.slice(0,8)),r=this.discriminators.get(n);if(void 0===r)return null;const o=this.layouts.get(r);if(!o)throw new Error(`Unknown event: ${r}`);return{data:o.decode(t.slice(8)),name:r}}}class Ie{constructor(e){if(void 0===e.types)return void(this.typeLayouts=new Map);const t=e.types.map((t=>[t.name,ye.typeDefLayout(t,e.types)]));this.typeLayouts=new Map(t),this.idl=e}encode(e,t){const n=c.alloc(1e3),r=this.typeLayouts.get(e);if(!r)throw new Error(`Unknown type: ${e}`);const o=r.encode(t,n);return n.slice(0,o)}decode(e,t){const n=this.typeLayouts.get(e);if(!n)throw new Error(`Unknown type: ${e}`);return n.decode(t)}}class ke{constructor(e){this.instruction=new we(e),this.accounts=new Se(e),this.events=new xe(e),this.types=new Ie(e)}}var Te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};class Le{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Be=Le;class Pe extends Le{isCount(){throw new Error("ExternalLayout is abstract")}}class Oe extends Pe{constructor(e,t,n){if(!(e instanceof Le))throw new TypeError("layout must be a Layout");if(void 0===t)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Me||this.layout instanceof Ue}decode(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Me extends Le{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class Ue extends Le{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const Ce=Math.pow(2,32);function De(e){const t=Math.floor(e/Ce);return{hi32:t,lo32:e-t*Ce}}function Ne(e,t){return e*Ce+t}class Re extends Le{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return Ne(e.readUInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=De(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}class Fe extends Le{constructor(e){super(8,e)}decode(e,t){void 0===t&&(t=0);const n=e.readUInt32LE(t);return Ne(e.readInt32LE(t+4),n)}encode(e,t,n){void 0===n&&(n=0);const r=De(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}class je extends Le{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof Le),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;try{n=this.fields.reduce(((n,r)=>{const o=r.getSpan(e,t);return t+=o,n+o}),0)}catch(e){throw new RangeError("indeterminate span")}return n}decode(e,t){void 0===t&&(t=0);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){void 0===n&&(n=0);const r=n;let o=0,i=0;for(const r of this.fields){let s=r.span;if(i=0<s?s:0,void 0!==r.property){const o=e[r.property];void 0!==o&&(i=r.encode(o,t,n),0>s&&(s=r.getSpan(t,n)))}o=n,n+=s}return o+i-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Ve{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class $e extends Ve{constructor(e,t){if(!(e instanceof Pe&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class ze extends Le{constructor(e,t,n){const r=e instanceof Me||e instanceof Ue;if(r)e=new $e(new Oe(e));else if(e instanceof Pe&&e.isCount())e=new $e(e);else if(!(e instanceof Ve))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof Le))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&r&&(o+=e.layout.span)),super(o,n),this.discriminator=e,this.usesPrefixDiscriminator=r,this.defaultLayout=t,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return i(e)},this.configGetSourceVariant=function(e){i=e.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){let n;void 0===t&&(t=0);const r=this.discriminator,o=r.decode(e,t);let i=this.registry[o];if(void 0===i){let s=0;i=this.defaultLayout,this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=o,n[i.property]=this.defaultLayout.decode(e,t+s)}else n=i.decode(e,t);return n}encode(e,t,n){void 0===n&&(n=0);const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=r.layout.span),r.encode(e[r.property],t,n),i+o.encode(e[o.property],t,n+i)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new qe(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t){let n=e;return Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class qe extends Le{constructor(e,t,n,r){if(!(e instanceof ze))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof Le))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){void 0===n&&(n=0);let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let o=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),o+=this.layout.getSpan(t,n+r),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class Ge extends Le{constructor(e,t){if(!(e instanceof Pe&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Pe||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){void 0===t&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof Pe&&(r=e.length),!Buffer.isBuffer(e)||r!==e.length)throw new TypeError((o="Blob.encode",((i=this).property?o+"["+i.property+"]":o)+" requires (length "+r+") Buffer as src"));var o,i;if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof Pe&&this.length.encode(r,t,n),r}}var Ke=(e,t,n)=>new Oe(e,t,n),We=e=>new Me(4,e),He=e=>new Fe(e),Je=(e,t,n)=>new je(e,t,n),Ze=(e,t,n)=>new ze(e,t,n),Xe=(e,t)=>new Ge(e,t);class Qe extends Be{constructor(e){super(-1,e),this.property=e,this.layout=Je([We("length"),We("lengthPadding"),Xe(Ke(We(),-8),"chars")],this.property)}encode(e,t,n=0){if(null==e)return this.layout.span;const r={chars:Buffer.from(e,"utf8")};return this.layout.encode(r,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return We().span+We().span+new u(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function Ye(e){return new Qe(e)}function et(e){return Xe(32,e)}const tt=Ze(We("instruction"));tt.addVariant(0,Je([He("lamports"),He("space"),et("owner")]),"createAccount"),tt.addVariant(1,Je([et("owner")]),"assign"),tt.addVariant(2,Je([He("lamports")]),"transfer"),tt.addVariant(3,Je([et("base"),Ye("seed"),He("lamports"),He("space"),et("owner")]),"createAccountWithSeed"),tt.addVariant(4,Je([et("authorized")]),"advanceNonceAccount"),tt.addVariant(5,Je([He("lamports")]),"withdrawNonceAccount"),tt.addVariant(6,Je([et("authorized")]),"initializeNonceAccount"),tt.addVariant(7,Je([et("authorized")]),"authorizeNonceAccount"),tt.addVariant(8,Je([He("space")]),"allocate"),tt.addVariant(9,Je([et("base"),Ye("seed"),He("space"),et("owner")]),"allocateWithSeed"),tt.addVariant(10,Je([et("base"),Ye("seed"),et("owner")]),"assignWithSeed"),tt.addVariant(11,Je([He("lamports"),Ye("seed"),et("owner")]),"transferWithSeed"),Math.max(...Object.values(tt.registry).map((e=>e.span)));class nt extends Be{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function rt(t){return new nt(Xe(32),(t=>new e(t)),(e=>e.toBuffer()),t)}var ot;Je([We("version"),We("state"),rt("authorizedPubkey"),rt("nonce"),Je([(ot="lamportsPerSignature",new Re(ot))],"feeCalculator")]);const it=new e("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),st=new e("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var at={exports:{}};function ct(e){return"accounts"in e}!function(e,t){var n="undefined"!=typeof self?self:Te,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,o="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=f(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=u(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[u(e)]},h.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},h.prototype.set=function(e,t){this.map[u(e)]=l(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),d(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),d(e)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n,r,o=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),w.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function E(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var A=[301,302,303,307,308];E.redirect=function(e,t){if(-1===A.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(e,n){return new Promise((function(r,i){var s=new v(e,n);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new E(o,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}_.polyfill=!0,e.fetch||(e.fetch=_,e.Headers=h,e.Request=v,e.Response=E),t.Headers=h,t.Request=v,t.Response=E,t.fetch=_,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(at,at.exports),h.rustEnum([h.struct([],"uninitialized"),h.struct([h.option(h.publicKey(),"authorityAddress")],"buffer"),h.struct([h.publicKey("programdataAddress")],"program"),h.struct([h.u64("slot"),h.option(h.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,h.u32());const ut=h.struct([h.publicKey("authority"),h.vecU8("data")]);function lt(e,t){var n,r;let o={};const i=e.args?e.args.length:0;if(t.length>i){if(t.length!==i+1)throw new Error(`provided too many arguments ${t} to instruction ${null==e?void 0:e.name} expecting: ${null!==(r=null===(n=e.args)||void 0===n?void 0:n.map((e=>e.name)))&&void 0!==r?r:[]}`);o=t.pop()}return[t,o]}class dt{static build(e,t,n){if("_inner"===e.name)throw new re("the _inner name is reserved");const r=(...o)=>{const[s,a]=lt(e,[...o]),{discriminator:c}=a;E(e.accounts,a.accounts);const u=r.accounts(a.accounts);return void 0!==a.remainingAccounts&&u.push(...a.remainingAccounts),ne("debug-logs")&&console.log("Outgoing account metas:",u),new i({keys:u,programId:n,data:t(e.name,b(e,...s),c)})};return r.accounts=t=>dt.accountsArray(t,e.accounts,n,e.name),r}static accountsArray(e,t,n,r){return e?t.map((t=>{if(void 0!==("accounts"in t?t.accounts:void 0)){const o=e[t.name];return dt.accountsArray(o,t.accounts,n,r).flat()}{const o=t;let i;try{i=A(e[t.name])}catch(e){throw new Error(`Wrong input type for account "${t.name}" in the instruction accounts object${void 0!==r?' for instruction "'+r+'"':""}. Expected PublicKey or string.`)}const s=o.isOptional&&i.equals(n);return{pubkey:i,isWritable:o.isMut&&!s,isSigner:o.isSigner&&!s}}})).flat():[]}}class ht{static build(e,t){return(...n)=>{var r,o,i;const[,a]=lt(e,[...n]),c=new s;if(a.preInstructions&&a.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(r=a.preInstructions)||void 0===r||r.forEach((e=>c.add(e))),null===(o=a.instructions)||void 0===o||o.forEach((e=>c.add(e))),c.add(t(...n)),null===(i=a.postInstructions)||void 0===i||i.forEach((e=>c.add(e))),c}}}class pt{static build(e,t,n,r){return async(...o)=>{var i;const s=t(...o),[,a]=lt(e,[...o]);if(void 0===r.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await r.sendAndConfirm(s,null!==(i=a.signers)&&void 0!==i?i:[],a.options)}catch(e){throw ae(e,n)}}}}class ft{static build(e,t,n,r){var o;const i={};return null===(o=e.accounts)||void 0===o||o.forEach((o=>{const s=d(o.name);i[s]=new mt(e,o,n,r,t)})),i}}class mt{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}get idlAccount(){return this._idlAccount}constructor(e,t,n,r,o){this._idlAccount=t,this._programId=n,this._provider=null!=r?r:ee(),this._coder=null!=o?o:new ke(e),this._size=this._coder.accounts.size(t)}async fetchNullable(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);return n}async fetchNullableAndContext(e,t){const n=await this.getAccountInfoAndContext(e,t),{value:r,context:o}=n;return{data:r&&0!==r.data.length?this._coder.accounts.decode(this._idlAccount.name,r.data):null,context:o}}async fetch(e,t){const{data:n}=await this.fetchNullableAndContext(e,t);if(null===n)throw new Error(`Account does not exist or has no data ${e.toString()}`);return n}async fetchAndContext(e,t){const{data:n,context:r}=await this.fetchNullableAndContext(e,t);if(null===n)throw new Error(`Account does not exist ${e.toString()}`);return{data:n,context:r}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map((e=>e?e.data:null))}async fetchMultipleAndContext(e,t){return(await z(this._provider.connection,e.map((e=>A(e))),t)).map((e=>{if(null==e)return null;const{account:t,context:n}=e;return{data:this._coder.accounts.decode(this._idlAccount.name,t.data),context:n}}))}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0),n=[];return null!=(null==t?void 0:t.offset)&&null!=(null==t?void 0:t.bytes)&&n.push({memcmp:{offset:t.offset,bytes:t.bytes}}),null!=(null==t?void 0:t.dataSize)&&n.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...n,...Array.isArray(e)?e:[]]})).map((({pubkey:e,account:t})=>({publicKey:e,account:this._coder.accounts.decode(this._idlAccount.name,t.data)})))}subscribe(e,t){const n=yt.get(e.toString());if(n)return n.ee;const r=new m;e=A(e);const o=this._provider.connection.onAccountChange(e,(e=>{const t=this._coder.accounts.decode(this._idlAccount.name,e.data);r.emit("change",t)}),t);return yt.set(e.toString(),{ee:r,listener:o}),r}async unsubscribe(e){let t=yt.get(e.toString());t?yt&&await this._provider.connection.removeAccountChangeListener(t.listener).then((()=>{yt.delete(e.toString())})).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(e,t){const r=this.size;if(void 0===this._provider.publicKey)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return n.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:null!=t?t:r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=t?t:r),programId:this._programId})}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(A(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(A(e),t)}}const yt=new Map,gt="Program log: ",wt="Program data: ",vt=gt.length,bt=wt.length;class Et{constructor(e,t,n){this._programId=e,this._provider=t,this._eventParser=new At(e,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var n;let r=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,(null!==(n=this._eventListeners.get(e))&&void 0!==n?n:[]).concat(r)),this._eventCallbacks.set(r,[e,t]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,((e,t)=>{if(!e.err)for(const n of this._eventParser.parseLogs(e.logs)){const r=this._eventListeners.get(n.name);r&&r.forEach((r=>{const o=this._eventCallbacks.get(r);if(o){const[,r]=o;r(n.data,t.slot,e.signature)}}))}}))),r}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[n]=t;let r=this._eventListeners.get(n);if(!r)throw new Error(`Event listeners don't exist for ${n}!`);if(this._eventCallbacks.delete(e),r=r.filter((t=>t!==e)),this._eventListeners.set(n,r),0===r.length&&this._eventListeners.delete(n),0===this._eventCallbacks.size){if(0!==this._eventListeners.size)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class At{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){const n=new St(e),r=new _t;let o=n.next();for(;null!==o;){let[e,i,s]=this.handleLog(r,o,t);e&&(yield e),i&&r.push(i),s&&r.pop(),o=n.next()}}handleLog(e,t,n){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,n):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(gt)||e.startsWith(wt)){const n=e.startsWith(gt)?e.slice(vt):e.slice(bt),r=this.coder.events.decode(n);if(t&&null===r)throw new Error(`Unable to decode event ${n}`);return[r,null,!1]}return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return null!==t.match(/^Program (.*) success/g)?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class _t{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class St{constructor(e){this.logs=e}next(){if(0===this.logs.length)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}class xt{static build(e,t,n,r,o,i,s){return async(...a)=>{var c;const u=t(...a),[,l]=lt(e,[...a]);let d;if(void 0===r.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{d=await r.simulate(u,l.signers,null===(c=l.options)||void 0===c?void 0:c.commitment)}catch(e){throw ae(e,n)}if(void 0===d)throw new Error("Unable to simulate transaction");const h=d.logs;if(!h)throw new Error("Simulated logs not found");const p=[];if(s.events){let e=new At(i,o);for(const t of e.parseLogs(h))p.push(t)}return{events:p,raw:h}}}}function It(e){return new Lt(Xe(8),(e=>Pt.fromBuffer(e)),(e=>e.toBuffer()),e)}function kt(t){return new Lt(Xe(32),(t=>new e(t)),(e=>e.toBuffer()),t)}function Tt(e,t){return new Bt(e,t)}class Lt extends Be{constructor(e,t,n,r){super(e.span,r),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class Bt extends Be{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=We()}encode(e,t,n=0){return null==e?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(0===n)return null;if(1===n)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class Pt extends u{toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(8===t.length)return t;if(t.length>=8)throw new Error("u64 too large");const n=Buffer.alloc(8);return t.copy(n),n}static fromBuffer(e){if(8!==e.length)throw new Error(`Invalid buffer length: ${e.length}`);return new Pt([...e].reverse().map((e=>`00${e.toString(16)}`.slice(-2))).join(""),16)}}const Ot=Je([kt("mint"),kt("owner"),It("amount"),Tt(kt(),"delegate"),(e=>{const t=Ze((e=>new Me(1,e))("discriminator"),null,"state");return t.addVariant(0,Je([]),"uninitialized"),t.addVariant(1,Je([]),"initialized"),t.addVariant(2,Je([]),"frozen"),t})(),Tt(It(),"isNative"),It("delegatedAmount"),Tt(kt(),"closeAuthority")]);class Mt{constructor(e,t,n,r,o,i,s,a){this._accounts=t,this._provider=n,this._programId=r,this._idlIx=o,this._idlTypes=s,this._customResolver=a,this._args=e,this._accountStore=new Ut(n,i,this._programId)}args(e){this._args=e}async resolve(){for(await this.resolveConst(this._idlIx.accounts),this._resolveEventCpi(this._idlIx.accounts);await this.resolvePdas(this._idlIx.accounts)+await this.resolveRelations(this._idlIx.accounts)+await this.resolveCustom()>0;);}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveOptionalsHelper(e,t){const n={};for(const r of t){const t=r.name,o=e[t];void 0!==o&&(Dt(o)?ct(r)?n[t]=this.resolveOptionalsHelper(o,r.accounts):n[t]=Nt(o,!0):null!==o?n[t]=A(o):r.isOptional&&(n[t]=this._programId))}return n}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce(((e,t)=>e&&e[t]),this._accounts);if(t&&t.toBase58)return t}set(e,t){let n=this._accounts;e.forEach(((r,o)=>{o==e.length-1&&(n[r]=t),n[r]=n[r]||{},n=n[r]}))}async resolveConst(e,t=[]){for(let n=0;n<e.length;n+=1){const r=e[n],o=r.accounts;o&&await this.resolveConst(o,[...t,d(r.name)]);const i=r,s=d(r.name);if(i.isSigner&&!this.get([...t,s])){if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this.set([...t,s],this._provider.wallet.publicKey)}Reflect.has(Mt.CONST_ACCOUNTS,s)&&!this.get([...t,s])&&this.set([...t,s],Mt.CONST_ACCOUNTS[s])}}_resolveEventCpi(t,n=[]){for(const r in t){const o=t[r],i=o.accounts;i&&this._resolveEventCpi(i,[...n,d(o.name)]);const s=+r+1;if(s===t.length)return;const a=d(t[r].name),c=d(t[s].name);if("eventAuthority"===a&&"program"===c){const t=[...n,a],r=[...n,c];return this.get(t)||this.set(t,e.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),void(this.get(r)||this.set(r,this._programId))}}}async resolvePdas(e,t=[]){let n=0;for(let r=0;r<e.length;r+=1){const o=e[r],i=o.accounts;i&&(n+=await this.resolvePdas(i,[...t,d(o.name)]));const s=o,a=d(o.name);s.pda&&s.pda.seeds.length>0&&!this.get([...t,a])&&Boolean(await this.autoPopulatePda(s,t))&&(n+=1)}return n}async resolveRelations(e,t=[]){let n=0;for(let r=0;r<e.length;r+=1){const o=e[r],i=o.accounts;i&&(n+=await this.resolveRelations(i,[...t,d(o.name)]));const s=o.relations||[],a=d(o.name),c=[...t,a],u=this.get(c);if(u){const e=s.filter((e=>!this.get([...t,d(e)])));if(n+=e.length,e.length>0){const n=await this._accountStore.fetchAccount({publicKey:u});await Promise.all(e.map((async e=>{const r=d(e);return this.set([...t,r],n[r]),n[r]})))}}}return n}async autoPopulatePda(t,n=[]){if(!t.pda||!t.pda.seeds)throw new Error("Must have seeds");const r=await Promise.all(t.pda.seeds.map((e=>this.toBuffer(e,n))));if(r.some((e=>void 0===e)))return;const o=await this.parseProgramId(t,n);if(!o)return;const[i]=await e.findProgramAddress(r,o);this.set([...n,d(t.name)],i)}async parseProgramId(t,n=[]){var r;if(!(null===(r=t.pda)||void 0===r?void 0:r.programId))return this._programId;switch(t.pda.programId.kind){case"const":return new e(this.toBufferConst(t.pda.programId.value));case"arg":return this.argValue(t.pda.programId);case"account":return await this.accountValue(t.pda.programId,n);default:throw new Error(`Unexpected program seed: ${t.pda.programId}`)}}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed: ${e}`)}}getType(e,t=[]){if(t.length>0&&e.defined){const n=this._idlTypes.find((t=>t.name===e.defined));if(!n)throw new Error(`Cannot find type ${e.defined}`);const r=n.type.fields.find((e=>e.name===t[0]));return this.getType(r.type,t.slice(1))}return e}toBufferConst(e){return this.toBufferValue(this.getType(e.type),e.value)}async toBufferArg(e){const t=this.argValue(e);if(void 0!==t)return this.toBufferValue(this.getType(e.type,(e.path||"").split(".").slice(1)),t)}argValue(e){const t=e.path.split("."),n=d(t[0]),r=this._idlIx.args.findIndex((e=>e.name===n));if(-1===r)throw new Error(`Unable to find argument for seed: ${n}`);return t.slice(1).reduce(((e,t)=>(e||{})[t]),this._args[r])}async toBufferAccount(e,t=[]){const n=await this.accountValue(e,t);if(n)return this.toBufferValue(e.type,n)}async accountValue(e,t=[]){const n=e.path.split("."),r=n[0],o=this.get([...t,d(r)]);if(null===o)throw new Error("fieldPubkey is null");if(1===n.length)return o;const i=await this._accountStore.fetchAccount({publicKey:o,name:e.account});return this.parseAccountValue(i,n.slice(1))}parseAccountValue(e,t){let n;for(;t.length>0;)n=e[d(t[0])],t=t.slice(1);return n}toBufferValue(e,t){switch(e){case"u8":return Buffer.from([t]);case"u16":let r=Buffer.alloc(2);return r.writeUInt16LE(t),r;case"u32":let o=Buffer.alloc(4);return o.writeUInt32LE(t),o;case"u64":let i=Buffer.alloc(8);return i.writeBigUInt64LE(BigInt(t)),i;case"string":return Buffer.from((n=t,(new TextEncoder).encode(n)));case"publicKey":return t.toBuffer();default:if(e.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}var n}}Mt.CONST_ACCOUNTS={associatedTokenProgram:st,rent:t,systemProgram:n.programId,tokenProgram:it,clock:r};class Ut{constructor(e,t,n){this._provider=e,this._programId=n,this._cache=new Map,this._idls={},this._idls[n.toBase58()]=t}async ensureIdl(e){if(!this._idls[e.toBase58()]){const t=await Vt.fetchIdl(e,this._provider);if(t){const n=new Vt(t,e,this._provider);this._idls[e.toBase58()]=n.account}}return this._idls[e.toBase58()]}async fetchAccount({publicKey:e,name:t,programId:n=this._programId}){const r=e.toString();if(!this._cache.has(r))if("TokenAccount"===t){const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${r}`);const n=function(e){return Ot.decode(e)}(t.data);this._cache.set(r,n)}else if(t){const o=await this.ensureIdl(n);if(o){const n=o[d(t)];if(n){const t=await n.fetch(e);this._cache.set(r,t)}}}else{const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${r}`);const n=t.data,o=await this.ensureIdl(t.owner);if(o){const e=Object.values(o)[0];if(!e)throw new Error("No accounts for this program");const t=e.coder.accounts.decodeAny(n);this._cache.set(r,t)}}return this._cache.get(r)}}class Ct{static build(e,t,n,r,o,i,s,a,c,u,l){return(...d)=>new Rt(d,r,o,i,s,a,e,t,n,c,u,l)}}function Dt(e){return"object"==typeof e&&null!==e&&!("_bn"in e)}function Nt(e,t){const n={};for(const r in e){const o=e[r];if(null!==o)n[r]=Dt(o)?Nt(o,!0):A(o);else if(t)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!")}return n}class Rt{constructor(e,t,n,r,o,i,s,a,c,u,l,d){this._ixFn=t,this._txFn=n,this._rpcFn=r,this._simulateFn=o,this._viewFn=i,this._programId=a,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._args=e,this._accountsResolver=new Mt(e,this._accounts,s,a,c,u,l,d)}args(e){this._args=e,this._accountsResolver.args(e)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}interface(e){if("spl_transfer_hook_interface::initialize_extra_account_metas"===e)this._discriminator=Buffer.from([43,34,13,49,167,88,235,235]);else{if("spl_transfer_hook_interface::execute"!==e)throw new Error(`Unsupported interface: ${e}`);this._discriminator=Buffer.from([105,37,101,197,75,251,102,26])}return this}accounts(e){return this._autoResolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._autoResolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e){return this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async rpc(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e,discriminator:this._discriminator})}async rpcAndKeys(e){return{pubkeys:await this.pubkeys(),signature:await this.rpc(e)}}async view(e){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,discriminator:this._discriminator})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:await this._signers}}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,discriminator:this._discriminator})}}class Ft{static build(e,t,n,r){const o=t.accounts.find((e=>e.isMut)),i=!!t.returns;if(o||!i)return;return async(...o)=>{var i,s;let a=await n(...o);const c=`Program return: ${e} `;let u=a.raw.find((e=>e.startsWith(c)));if(!u)throw new Error("View expected return log");let l=v(u.slice(c.length)),d=t.returns;if(!d)throw new Error("View expected return type");return ye.fieldLayout({type:d},Array.from([...null!==(i=r.accounts)&&void 0!==i?i:[],...null!==(s=r.types)&&void 0!==s?s:[]])).decode(l)}}}class jt{static build(e,t,n,r,o){const i={},s={},a={},c={},u={},l={},h=function(e){const t=new Map;return e.errors&&e.errors.forEach((e=>{var n;let r=null!==(n=e.msg)&&void 0!==n?n:e.name;t.set(e.code,r)})),t}(e),p=e.accounts?ft.build(e,t,n,r):{};return e.instructions.forEach((f=>{const m=dt.build(f,((e,n,r)=>t.instruction.encode(e,n,r)),n),y=ht.build(f,m),g=pt.build(f,y,h,r),w=xt.build(f,y,h,r,t,n,e),v=Ft.build(n,f,w,e),b=Ct.build(r,n,f,m,y,g,w,v,p,e.types||[],o&&o(f)),E=d(f.name);s[E]=m,a[E]=y,i[E]=g,c[E]=w,u[E]=b,v&&(l[E]=v)})),[i,s,a,p,c,u,l]}}class Vt{get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t,n,r,o){t=A(t),n||(n=ee()),this._idl=e,this._provider=n,this._programId=t,this._coder=null!=r?r:new ke(e),this._events=new Et(this._programId,n,this._coder);const[i,s,a,c,u,l,d]=jt.build(e,this._coder,t,n,null!=o?o:()=>{});this.rpc=i,this.instruction=s,this.transaction=a,this.account=c,this.simulate=u,this.methods=l,this.views=d}static async at(e,t){const n=A(e),r=await Vt.fetchIdl(n,t);if(!r)throw new Error(`IDL not found for program: ${e.toString()}`);return new Vt(r,n,t)}static async fetchIdl(t,n){n=null!=n?n:ee();const r=A(t),o=await async function(t){const n=(await e.findProgramAddress([],t))[0];return await e.createWithSeed(n,"anchor:idl",t)}(r),i=await n.connection.getAccountInfo(o);if(!i)return null;let s=(a=i.data.slice(8),ut.decode(a));var a;const c=f(s.data);return JSON.parse(function(e){return new TextDecoder("utf-8").decode(e)}(c))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new e("11111111111111111111111111111111");var $t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.s16=$t.s8=$t.nu64be=$t.u48be=$t.u40be=$t.u32be=$t.u24be=$t.u16be=$t.nu64=$t.u48=$t.u40=$t.u32=$t.u24=$t.u16=Tn=$t.u8=$t.offset=$t.greedy=$t.Constant=$t.UTF8=$t.CString=$t.Blob=$t.Boolean=$t.BitField=$t.BitStructure=$t.VariantLayout=$t.Union=$t.UnionLayoutDiscriminator=$t.UnionDiscriminator=$t.Structure=$t.Sequence=$t.DoubleBE=$t.Double=$t.FloatBE=$t.Float=$t.NearInt64BE=$t.NearInt64=$t.NearUInt64BE=$t.NearUInt64=$t.IntBE=$t.Int=$t.UIntBE=$t.UInt=$t.OffsetLayout=$t.GreedyCount=$t.ExternalLayout=$t.bindConstructorLayout=$t.nameWithProperty=$t.Layout=$t.uint8ArrayToBuffer=$t.checkUint8Array=void 0,$t.constant=$t.utf8=$t.cstr=On=$t.blob=$t.unionLayoutDiscriminator=$t.union=Bn=$t.seq=$t.bits=Ln=$t.struct=$t.f64be=$t.f64=$t.f32be=$t.f32=$t.ns64be=$t.s48be=$t.s40be=$t.s32be=$t.s24be=$t.s16be=$t.ns64=$t.s48=$t.s40=$t.s32=$t.s24=void 0;const zt=a;function qt(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function Gt(e){return qt(e),zt.Buffer.from(e.buffer,e.byteOffset,e.length)}$t.checkUint8Array=qt,$t.uint8ArrayToBuffer=Gt;class Kt{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Wt=$t.Layout=Kt;function Ht(e,t){return t.property?e+"["+t.property+"]":e}$t.nameWithProperty=Ht,$t.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Kt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,n)=>t.decode(e,n),writable:!0})};class Jt extends Kt{isCount(){throw new Error("ExternalLayout is abstract")}}$t.ExternalLayout=Jt;class Zt extends Jt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){qt(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}$t.GreedyCount=Zt;class Xt extends Jt{constructor(e,t=0,n){if(!(e instanceof Kt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Qt||this.layout instanceof Yt}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}}$t.OffsetLayout=Xt;class Qt extends Kt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Gt(e).readUIntLE(t,this.span)}encode(e,t,n=0){return Gt(t).writeUIntLE(e,n,this.span),this.span}}$t.UInt=Qt;class Yt extends Kt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Gt(e).readUIntBE(t,this.span)}encode(e,t,n=0){return Gt(t).writeUIntBE(e,n,this.span),this.span}}$t.UIntBE=Yt;class en extends Kt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Gt(e).readIntLE(t,this.span)}encode(e,t,n=0){return Gt(t).writeIntLE(e,n,this.span),this.span}}$t.Int=en;class tn extends Kt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Gt(e).readIntBE(t,this.span)}encode(e,t,n=0){return Gt(t).writeIntBE(e,n,this.span),this.span}}$t.IntBE=tn;const nn=Math.pow(2,32);function rn(e){const t=Math.floor(e/nn);return{hi32:t,lo32:e-t*nn}}function on(e,t){return e*nn+t}class sn extends Kt{constructor(e){super(8,e)}decode(e,t=0){const n=Gt(e),r=n.readUInt32LE(t);return on(n.readUInt32LE(t+4),r)}encode(e,t,n=0){const r=rn(e),o=Gt(t);return o.writeUInt32LE(r.lo32,n),o.writeUInt32LE(r.hi32,n+4),8}}$t.NearUInt64=sn;class an extends Kt{constructor(e){super(8,e)}decode(e,t=0){const n=Gt(e);return on(n.readUInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=rn(e),o=Gt(t);return o.writeUInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}$t.NearUInt64BE=an;class cn extends Kt{constructor(e){super(8,e)}decode(e,t=0){const n=Gt(e),r=n.readUInt32LE(t);return on(n.readInt32LE(t+4),r)}encode(e,t,n=0){const r=rn(e),o=Gt(t);return o.writeUInt32LE(r.lo32,n),o.writeInt32LE(r.hi32,n+4),8}}$t.NearInt64=cn;class un extends Kt{constructor(e){super(8,e)}decode(e,t=0){const n=Gt(e);return on(n.readInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){const r=rn(e),o=Gt(t);return o.writeInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}$t.NearInt64BE=un;class ln extends Kt{constructor(e){super(4,e)}decode(e,t=0){return Gt(e).readFloatLE(t)}encode(e,t,n=0){return Gt(t).writeFloatLE(e,n),4}}$t.Float=ln;class dn extends Kt{constructor(e){super(4,e)}decode(e,t=0){return Gt(e).readFloatBE(t)}encode(e,t,n=0){return Gt(t).writeFloatBE(e,n),4}}$t.FloatBE=dn;class hn extends Kt{constructor(e){super(8,e)}decode(e,t=0){return Gt(e).readDoubleLE(t)}encode(e,t,n=0){return Gt(t).writeDoubleLE(e,n),8}}$t.Double=hn;class pn extends Kt{constructor(e){super(8,e)}decode(e,t=0){return Gt(e).readDoubleBE(t)}encode(e,t,n=0){return Gt(t).writeDoubleBE(e,n),8}}$t.DoubleBE=pn;class fn extends Kt{constructor(e,t,n){if(!(e instanceof Kt))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Jt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(t instanceof Jt)&&0<e.span&&(r=t*e.span),super(r,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof Jt&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let o=0;for(;o<r;)n+=this.elementLayout.getSpan(e,t+n),++o}return n}decode(e,t=0){const n=[];let r=0,o=this.count;for(o instanceof Jt&&(o=o.decode(e,t));r<o;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}encode(e,t,n=0){const r=this.elementLayout,o=e.reduce(((e,o)=>e+r.encode(o,t,n+e)),0);return this.count instanceof Jt&&this.count.encode(e.length,t,n),o}}$t.Sequence=fn;class mn extends Kt{constructor(e,t,n){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof Kt),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===n&&(n=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(r,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce(((n,r)=>{const o=r.getSpan(e,t);return t+=o,n+o}),0)}catch(e){throw new RangeError("indeterminate span")}return n}decode(e,t=0){qt(e);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(e,t)),t+=r.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const r=n;let o=0,i=0;for(const r of this.fields){let s=r.span;if(i=0<s?s:0,void 0!==r.property){const o=e[r.property];void 0!==o&&(i=r.encode(o,t,n),0>s&&(s=r.getSpan(t,n)))}o=n,n+=s}return o+i-r}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}$t.Structure=mn;class yn{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}}$t.UnionDiscriminator=yn;class gn extends yn{constructor(e,t){if(!(e instanceof Jt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}$t.UnionLayoutDiscriminator=gn;class wn extends Kt{constructor(e,t,n){let r;if(e instanceof Qt||e instanceof Yt)r=new gn(new Xt(e));else if(e instanceof Jt&&e.isCount())r=new gn(e);else{if(!(e instanceof yn))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=e}if(void 0===t&&(t=null),!(null===t||t instanceof Kt))throw new TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw new Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof Qt||e instanceof Yt)&&(o+=r.layout.span)),super(o,n),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof Qt||e instanceof Yt,this.defaultLayout=t,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return i(e)},this.configGetSourceVariant=function(e){i=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const r=this.discriminator,o=r.decode(e,t),i=this.registry[o];if(void 0===i){const i=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=o,n[i.property]=i.decode(e,t+s)}else n=i.decode(e,t);return n}encode(e,t,n=0){const r=this.getSourceVariant(e);if(void 0===r){const r=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=r.layout.span),r.encode(e[r.property],t,n),i+o.encode(e[o.property],t,n+i)}return r.encode(e,t,n)}addVariant(e,t,n){const r=new vn(this,e,t,n);return this.registry[e]=r,r}getVariant(e,t=0){let n;return n=e instanceof Uint8Array?this.discriminator.decode(e,t):e,this.registry[n]}}$t.Union=wn;class vn extends Kt{constructor(e,t,n,r){if(!(e instanceof wn))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof Kt))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,r),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,t+n)),n+r}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let o=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),o+=this.layout.getSpan(t,n+r),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function bn(e){return 0>e&&(e+=4294967296),e}$t.VariantLayout=vn;class En extends Kt{constructor(e,t,n){if(!(e instanceof Qt||e instanceof Yt))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===n&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let r=0;this._packedSetValue=function(e){return r=bn(e),this},this._packedGetValue=function(){return r}}decode(e,t=0){const n=this.makeDestinationObject(),r=this.word.decode(e,t);this._packedSetValue(r);for(const t of this.fields)void 0!==t.property&&(n[t.property]=t.decode(e));return n}encode(e,t,n=0){const r=this.word.decode(t,n);this._packedSetValue(r);for(const t of this.fields)if(void 0!==t.property){const n=e[t.property];void 0!==n&&t.encode(n)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new An(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new _n(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}$t.BitStructure=En;class An{constructor(e,t,n){if(!(e instanceof En))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const r=8*e.span,o=e.fields.reduce(((e,t)=>e+t.bits),0);if(t+o>r)throw new Error("bits too long for span remainder ("+(r-o)+" of "+r+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=r-o-t),this.wordMask=bn(this.valueMask<<this.start),this.property=n}decode(e,t){return bn(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==bn(e&this.valueMask))throw new TypeError(Ht("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=bn(e<<this.start);this.container._packedSetValue(bn(t&~this.wordMask)|n)}}$t.BitField=An;class _n extends An{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}$t.Boolean=_n;class Sn extends Kt{constructor(e,t){if(!(e instanceof Jt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Jt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),Gt(e).slice(t,t+n)}encode(e,t,n){let r=this.length;if(this.length instanceof Jt&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw new TypeError(Ht("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>t.length)throw new RangeError("encoding overruns Uint8Array");const o=Gt(e);return Gt(t).write(o.toString("hex"),n,r,"hex"),this.length instanceof Jt&&this.length.encode(r,t,n),r}}$t.Blob=Sn;class xn extends Kt{constructor(e){super(-1,e)}getSpan(e,t=0){qt(e);let n=t;for(;n<e.length&&0!==e[n];)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return Gt(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=zt.Buffer.from(e,"utf8"),o=r.length;if(n+o>t.length)throw new RangeError("encoding overruns Buffer");const i=Gt(t);return r.copy(i,n),i[n+o]=0,o+1}}$t.CString=xn;class In extends Kt{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return qt(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Gt(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){"string"!=typeof e&&(e=String(e));const r=zt.Buffer.from(e,"utf8"),o=r.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(Gt(t),n),o}}$t.UTF8=In;class kn extends Kt{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}}$t.Constant=kn,$t.greedy=(e,t)=>new Zt(e,t),$t.offset=(e,t,n)=>new Xt(e,t,n);var Tn=$t.u8=e=>new Qt(1,e);$t.u16=e=>new Qt(2,e),$t.u24=e=>new Qt(3,e),$t.u32=e=>new Qt(4,e),$t.u40=e=>new Qt(5,e),$t.u48=e=>new Qt(6,e),$t.nu64=e=>new sn(e),$t.u16be=e=>new Yt(2,e),$t.u24be=e=>new Yt(3,e),$t.u32be=e=>new Yt(4,e),$t.u40be=e=>new Yt(5,e),$t.u48be=e=>new Yt(6,e),$t.nu64be=e=>new an(e),$t.s8=e=>new en(1,e),$t.s16=e=>new en(2,e),$t.s24=e=>new en(3,e),$t.s32=e=>new en(4,e),$t.s40=e=>new en(5,e),$t.s48=e=>new en(6,e),$t.ns64=e=>new cn(e),$t.s16be=e=>new tn(2,e),$t.s24be=e=>new tn(3,e),$t.s32be=e=>new tn(4,e),$t.s40be=e=>new tn(5,e),$t.s48be=e=>new tn(6,e),$t.ns64be=e=>new un(e),$t.f32=e=>new ln(e),$t.f32be=e=>new dn(e),$t.f64=e=>new hn(e),$t.f64be=e=>new pn(e);var Ln=$t.struct=(e,t,n)=>new mn(e,t,n);$t.bits=(e,t,n)=>new En(e,t,n);var Bn=$t.seq=(e,t,n)=>new fn(e,t,n),Pn=$t.union=(e,t,n)=>new wn(e,t,n);$t.unionLayoutDiscriminator=(e,t)=>new gn(e,t);var On=$t.blob=(e,t)=>new Sn(e,t);$t.cstr=e=>new xn(e),$t.utf8=(e,t)=>new In(e,t),$t.constant=(e,t)=>new kn(e,t);const Mn=e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)});var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.toBigIntLE=function(e){{const t=Buffer.from(e);t.reverse();const n=t.toString("hex");return 0===n.length?BigInt(0):BigInt(`0x${n}`)}},Un.toBigIntBE=function(e){{const t=e.toString("hex");return 0===t.length?BigInt(0):BigInt(`0x${t}`)}},Un.toBufferLE=function(e,t){{const n=e.toString(16),r=Buffer.from(n.padStart(2*t,"0").slice(0,2*t),"hex");return r.reverse(),r}},Un.toBufferBE=function(e,t){{const n=e.toString(16);return Buffer.from(n.padStart(2*t,"0").slice(0,2*t),"hex")}};var Cn=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Dn=Math.ceil,Nn=Math.floor,Rn="[BigNumber Error] ",Fn=Rn+"Number primitive has more than 15 significant digits: ",jn=1e14,Vn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],$n=1e9;function zn(e){var t=0|e;return e>0||e===t?t:t-1}function qn(e){for(var t,n,r=1,o=e.length,i=e[0]+"";r<o;){for(n=14-(t=e[r++]+"").length;n--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function Gn(e,t){var n,r,o=e.c,i=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=c==u,!o||!i)return r?0:!o^n?1:-1;if(!r)return c>u^n?1:-1;for(a=(c=o.length)<(u=i.length)?c:u,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^n?1:-1;return c==u?0:c>u^n?1:-1}function Kn(e,t,n,r){if(e<t||e>n||e!==Nn(e))throw Error(Rn+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Wn(e){var t=e.c.length-1;return zn(e.e/14)==t&&e.c[t]%2!=0}function Hn(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Jn(e,t,n){var r,o;if(t<0){for(o=n+".";++t;o+=n);e=o+e}else if(++t>(r=e.length)){for(o=n,t-=r;--t;o+=n);e+=o}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var Zn=function e(t){var n,r,o,i,s,a,c,u,l,d,h=I.prototype={constructor:I,toString:null,valueOf:null},p=new I(1),f=20,m=4,y=-7,g=21,w=-1e7,v=1e7,b=!1,E=1,A=0,_={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz",x=!0;function I(e,t){var n,i,s,a,c,u,l,d,h=this;if(!(h instanceof I))return new I(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>v?h.c=h.e=null:e.e<w?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,c=e;c>=10;c/=10,a++);return void(a>v?h.c=h.e=null:(h.e=a,h.c=[e]))}d=String(e)}else{if(!Cn.test(d=String(e)))return o(h,d,u);h.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(c=d.search(/e/i))>0?(a<0&&(a=c),a+=+d.slice(c+1),d=d.substring(0,c)):a<0&&(a=d.length)}else{if(Kn(t,2,S.length,"Base"),10==t&&x)return B(h=new I(e),f+h.e+1,m);if(d=String(e),u="number"==typeof e){if(0*e!=0)return o(h,d,u,t);if(h.s=1/e<0?(d=d.slice(1),-1):1,I.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(Fn+e)}else h.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=S.slice(0,t),a=c=0,l=d.length;c<l;c++)if(n.indexOf(i=d.charAt(c))<0){if("."==i){if(c>a){a=l;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,c=-1,a=0;continue}return o(h,String(e),u,t)}u=!1,(a=(d=r(d,t,10,h.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(c=0;48===d.charCodeAt(c);c++);for(l=d.length;48===d.charCodeAt(--l););if(d=d.slice(c,++l)){if(l-=c,u&&I.DEBUG&&l>15&&(e>9007199254740991||e!==Nn(e)))throw Error(Fn+h.s*e);if((a=a-c-1)>v)h.c=h.e=null;else if(a<w)h.c=[h.e=0];else{if(h.e=a,h.c=[],c=(a+1)%14,a<0&&(c+=14),c<l){for(c&&h.c.push(+d.slice(0,c)),l-=14;c<l;)h.c.push(+d.slice(c,c+=14));c=14-(d=d.slice(c)).length}else c-=l;for(;c--;d+="0");h.c.push(+d)}}else h.c=[h.e=0]}function k(e,t,n,r){var o,i,s,a,c;if(null==n?n=m:Kn(n,0,8),!e.c)return e.toString();if(o=e.c[0],s=e.e,null==t)c=qn(e.c),c=1==r||2==r&&(s<=y||s>=g)?Hn(c,s):Jn(c,s,"0");else if(i=(e=B(new I(e),t,n)).e,a=(c=qn(e.c)).length,1==r||2==r&&(t<=i||i<=y)){for(;a<t;c+="0",a++);c=Hn(c,i)}else if(t-=s,c=Jn(c,i,"0"),i+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-a)>0)for(i+1==a&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function T(e,t){for(var n,r=1,o=new I(e[0]);r<e.length;r++){if(!(n=new I(e[r])).s){o=n;break}t.call(o,n)&&(o=n)}return o}function L(e,t,n){for(var r=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,r++);return(n=r+14*n-1)>v?e.c=e.e=null:n<w?e.c=[e.e=0]:(e.e=n,e.c=t),e}function B(e,t,n,r){var o,i,s,a,c,u,l,d=e.c,h=Vn;if(d){e:{for(o=1,a=d[0];a>=10;a/=10,o++);if((i=t-o)<0)i+=14,s=t,l=(c=d[u=0])/h[o-s-1]%10|0;else if((u=Dn((i+1)/14))>=d.length){if(!r)break e;for(;d.length<=u;d.push(0));c=l=0,o=1,s=(i%=14)-14+1}else{for(c=a=d[u],o=1;a>=10;a/=10,o++);l=(s=(i%=14)-14+o)<0?0:c/h[o-s-1]%10|0}if(r=r||t<0||null!=d[u+1]||(s<0?c:c%h[o-s-1]),r=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(i>0?s>0?c/h[o-s]:0:d[u-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,r?(t-=e.e+1,d[0]=h[(14-t%14)%14],e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=u,a=1,u--):(d.length=u+1,a=h[14-i],d[u]=s>0?Nn(c/h[o-s]%h[s])*a:0),r)for(;;){if(0==u){for(i=1,s=d[0];s>=10;s/=10,i++);for(s=d[0]+=a,a=1;s>=10;s/=10,a++);i!=a&&(e.e++,d[0]==jn&&(d[0]=1));break}if(d[u]+=a,d[u]!=jn)break;d[u--]=0,a=1}for(i=d.length;0===d[--i];d.pop());}e.e>v?e.c=e.e=null:e.e<w&&(e.c=[e.e=0])}return e}function P(e){var t,n=e.e;return null===n?e.toString():(t=qn(e.c),t=n<=y||n>=g?Hn(t,n):Jn(t,n,"0"),e.s<0?"-"+t:t)}return I.clone=e,I.ROUND_UP=0,I.ROUND_DOWN=1,I.ROUND_CEIL=2,I.ROUND_FLOOR=3,I.ROUND_HALF_UP=4,I.ROUND_HALF_DOWN=5,I.ROUND_HALF_EVEN=6,I.ROUND_HALF_CEIL=7,I.ROUND_HALF_FLOOR=8,I.EUCLID=9,I.config=I.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(Rn+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(Kn(n=e[t],0,$n,t),f=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(Kn(n=e[t],0,8,t),m=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(Kn(n[0],-$n,0,t),Kn(n[1],0,$n,t),y=n[0],g=n[1]):(Kn(n,-$n,$n,t),y=-(g=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)Kn(n[0],-$n,-1,t),Kn(n[1],1,$n,t),w=n[0],v=n[1];else{if(Kn(n,-$n,$n,t),!n)throw Error(Rn+t+" cannot be zero: "+n);w=-(v=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(Rn+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw b=!n,Error(Rn+"crypto unavailable");b=n}else b=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(Kn(n=e[t],0,9,t),E=n),e.hasOwnProperty(t="POW_PRECISION")&&(Kn(n=e[t],0,$n,t),A=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(Rn+t+" not an object: "+n);_=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(Rn+t+" invalid: "+n);x="0123456789"==n.slice(0,10),S=n}}return{DECIMAL_PLACES:f,ROUNDING_MODE:m,EXPONENTIAL_AT:[y,g],RANGE:[w,v],CRYPTO:b,MODULO_MODE:E,POW_PRECISION:A,FORMAT:_,ALPHABET:S}},I.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!I.DEBUG)return!0;var t,n,r=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===i||-1===i)&&o>=-$n&&o<=$n&&o===Nn(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break e}if((t=(o+1)%14)<1&&(t+=14),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=jn||n!==Nn(n))break e;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(Rn+"Invalid BigNumber: "+e)},I.maximum=I.max=function(){return T(arguments,h.lt)},I.minimum=I.min=function(){return T(arguments,h.gt)},I.random=(i=9007199254740992,s=Math.random()*i&2097151?function(){return Nn(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,o,i,a=0,c=[],u=new I(p);if(null==e?e=f:Kn(e,0,$n),o=Dn(e/14),b)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(i=131072*t[a]+(t[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[a]=n[0],t[a+1]=n[1]):(c.push(i%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw b=!1,Error(Rn+"crypto unavailable");for(t=crypto.randomBytes(o*=7);a<o;)(i=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(c.push(i%1e14),a+=7);a=o/7}if(!b)for(;a<o;)(i=s())<9e15&&(c[a++]=i%1e14);for(e%=14,(o=c[--a])&&e&&(i=Vn[14-e],c[a]=Nn(o/i)*i);0===c[a];c.pop(),a--);if(a<0)c=[r=0];else{for(r=-1;0===c[0];c.splice(0,1),r-=14);for(a=1,i=c[0];i>=10;i/=10,a++);a<14&&(r-=14-a)}return u.e=r,u.c=c,u}),I.sum=function(){for(var e=1,t=arguments,n=new I(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){var e="0123456789";function t(e,t,n,r){for(var o,i,s=[0],a=0,c=e.length;a<c;){for(i=s.length;i--;s[i]*=t);for(s[0]+=r.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>n-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/n|0,s[o]%=n)}return s.reverse()}return function(r,o,i,s,a){var c,u,l,d,h,p,y,g,w=r.indexOf("."),v=f,b=m;for(w>=0&&(d=A,A=0,r=r.replace(".",""),p=(g=new I(o)).pow(r.length-w),A=d,g.c=t(Jn(qn(p.c),p.e,"0"),10,i,e),g.e=g.c.length),l=d=(y=t(r,o,i,a?(c=S,e):(c=e,S))).length;0==y[--d];y.pop());if(!y[0])return c.charAt(0);if(w<0?--l:(p.c=y,p.e=l,p.s=s,y=(p=n(p,g,v,b,i)).c,h=p.r,l=p.e),w=y[u=l+v+1],d=i/2,h=h||u<0||null!=y[u+1],h=b<4?(null!=w||h)&&(0==b||b==(p.s<0?3:2)):w>d||w==d&&(4==b||h||6==b&&1&y[u-1]||b==(p.s<0?8:7)),u<1||!y[0])r=h?Jn(c.charAt(1),-v,c.charAt(0)):c.charAt(0);else{if(y.length=u,h)for(--i;++y[--u]>i;)y[u]=0,u||(++l,y=[1].concat(y));for(d=y.length;!y[--d];);for(w=0,r="";w<=d;r+=c.charAt(y[w++]));r=Jn(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,o,i,s,a=0,c=e.length,u=t%1e7,l=t/1e7|0;for(e=e.slice();c--;)a=((o=u*(i=e[c]%1e7)+(r=l*i+(s=e[c]/1e7|0)*u)%1e7*1e7+a)/n|0)+(r/1e7|0)+l*s,e[c]=o%n;return a&&(e=[a].concat(e)),e}function t(e,t,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,n,r){for(var o=0;n--;)e[n]-=o,o=e[n]<t[n]?1:0,e[n]=o*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,o,i,s,a){var c,u,l,d,h,p,f,m,y,g,w,v,b,E,A,_,S,x=r.s==o.s?1:-1,k=r.c,T=o.c;if(!(k&&k[0]&&T&&T[0]))return new I(r.s&&o.s&&(k?!T||k[0]!=T[0]:T)?k&&0==k[0]||!T?0*x:x/0:NaN);for(y=(m=new I(x)).c=[],x=i+(u=r.e-o.e)+1,a||(a=jn,u=zn(r.e/14)-zn(o.e/14),x=x/14|0),l=0;T[l]==(k[l]||0);l++);if(T[l]>(k[l]||0)&&u--,x<0)y.push(1),d=!0;else{for(E=k.length,_=T.length,l=0,x+=2,(h=Nn(a/(T[0]+1)))>1&&(T=e(T,h,a),k=e(k,h,a),_=T.length,E=k.length),b=_,w=(g=k.slice(0,_)).length;w<_;g[w++]=0);S=T.slice(),S=[0].concat(S),A=T[0],T[1]>=a/2&&A++;do{if(h=0,(c=t(T,g,_,w))<0){if(v=g[0],_!=w&&(v=v*a+(g[1]||0)),(h=Nn(v/A))>1)for(h>=a&&(h=a-1),f=(p=e(T,h,a)).length,w=g.length;1==t(p,g,f,w);)h--,n(p,_<f?S:T,f,a),f=p.length,c=1;else 0==h&&(c=h=1),f=(p=T.slice()).length;if(f<w&&(p=[0].concat(p)),n(g,p,w,a),w=g.length,-1==c)for(;t(T,g,_,w)<1;)h++,n(g,_<w?S:T,w,a),w=g.length}else 0===c&&(h++,g=[0]);y[l++]=h,g[0]?g[w++]=k[b]||0:(g=[k[b]],w=1)}while((b++<E||null!=g[0])&&x--);d=null!=g[0],y[0]||y.splice(0,1)}if(a==jn){for(l=1,x=y[0];x>=10;x/=10,l++);B(m,i+(m.e=l+14*u-1)+1,s,d)}else m.e=u,m.r=+d;return m}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,u=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,d=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(e,t,n,r){var o,i=n?t:t.replace(d,"");if(l.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(a,(function(e,t,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?e:t})),r&&(o=r,i=i.replace(c,"$1").replace(u,"0.$1")),t!=i))return new I(i,o);if(I.DEBUG)throw Error(Rn+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},h.absoluteValue=h.abs=function(){var e=new I(this);return e.s<0&&(e.s=1),e},h.comparedTo=function(e,t){return Gn(this,new I(e,t))},h.decimalPlaces=h.dp=function(e,t){var n,r,o,i=this;if(null!=e)return Kn(e,0,$n),null==t?t=m:Kn(t,0,8),B(new I(i),e+i.e+1,t);if(!(n=i.c))return null;if(r=14*((o=n.length-1)-zn(this.e/14)),o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},h.dividedBy=h.div=function(e,t){return n(this,new I(e,t),f,m)},h.dividedToIntegerBy=h.idiv=function(e,t){return n(this,new I(e,t),0,1)},h.exponentiatedBy=h.pow=function(e,t){var n,r,o,i,s,a,c,u,l=this;if((e=new I(e)).c&&!e.isInteger())throw Error(Rn+"Exponent not an integer: "+P(e));if(null!=t&&(t=new I(t)),s=e.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!e.c||!e.c[0])return u=new I(Math.pow(+P(l),s?2-Wn(e):+P(e))),t?u.mod(t):u;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new I(NaN);(r=!a&&l.isInteger()&&t.isInteger())&&(l=l.mod(t))}else{if(e.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||s&&l.c[1]>=24e7:l.c[0]<8e13||s&&l.c[0]<=9999975e7)))return i=l.s<0&&Wn(e)?-0:0,l.e>-1&&(i=1/i),new I(a?1/i:i);A&&(i=Dn(A/14+2))}for(s?(n=new I(.5),a&&(e.s=1),c=Wn(e)):c=(o=Math.abs(+P(e)))%2,u=new I(p);;){if(c){if(!(u=u.times(l)).c)break;i?u.c.length>i&&(u.c.length=i):r&&(u=u.mod(t))}if(o){if(0===(o=Nn(o/2)))break;c=o%2}else if(B(e=e.times(n),e.e+1,1),e.e>14)c=Wn(e);else{if(0==(o=+P(e)))break;c=o%2}l=l.times(l),i?l.c&&l.c.length>i&&(l.c.length=i):r&&(l=l.mod(t))}return r?u:(a&&(u=p.div(u)),t?u.mod(t):i?B(u,A,m,void 0):u)},h.integerValue=function(e){var t=new I(this);return null==e?e=m:Kn(e,0,8),B(t,t.e+1,e)},h.isEqualTo=h.eq=function(e,t){return 0===Gn(this,new I(e,t))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(e,t){return Gn(this,new I(e,t))>0},h.isGreaterThanOrEqualTo=h.gte=function(e,t){return 1===(t=Gn(this,new I(e,t)))||0===t},h.isInteger=function(){return!!this.c&&zn(this.e/14)>this.c.length-2},h.isLessThan=h.lt=function(e,t){return Gn(this,new I(e,t))<0},h.isLessThanOrEqualTo=h.lte=function(e,t){return-1===(t=Gn(this,new I(e,t)))||0===t},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(e,t){var n,r,o,i,s=this,a=s.s;if(t=(e=new I(e,t)).s,!a||!t)return new I(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/14,u=e.e/14,l=s.c,d=e.c;if(!c||!u){if(!l||!d)return l?(e.s=-t,e):new I(d?s:NaN);if(!l[0]||!d[0])return d[0]?(e.s=-t,e):new I(l[0]?s:3==m?-0:0)}if(c=zn(c),u=zn(u),l=l.slice(),a=c-u){for((i=a<0)?(a=-a,o=l):(u=c,o=d),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(r=(i=(a=l.length)<(t=d.length))?a:t,a=t=0;t<r;t++)if(l[t]!=d[t]){i=l[t]<d[t];break}if(i&&(o=l,l=d,d=o,e.s=-e.s),(t=(r=d.length)-(n=l.length))>0)for(;t--;l[n++]=0);for(t=jn-1;r>a;){if(l[--r]<d[r]){for(n=r;n&&!l[--n];l[n]=t);--l[n],l[r]+=jn}l[r]-=d[r]}for(;0==l[0];l.splice(0,1),--u);return l[0]?L(e,l,u):(e.s=3==m?-1:1,e.c=[e.e=0],e)},h.modulo=h.mod=function(e,t){var r,o,i=this;return e=new I(e,t),!i.c||!e.s||e.c&&!e.c[0]?new I(NaN):!e.c||i.c&&!i.c[0]?new I(i):(9==E?(o=e.s,e.s=1,r=n(i,e,0,3),e.s=o,r.s*=o):r=n(i,e,0,E),(e=i.minus(r.times(e))).c[0]||1!=E||(e.s=i.s),e)},h.multipliedBy=h.times=function(e,t){var n,r,o,i,s,a,c,u,l,d,h,p,f,m,y,g=this,w=g.c,v=(e=new I(e,t)).c;if(!(w&&v&&w[0]&&v[0]))return!g.s||!e.s||w&&!w[0]&&!v||v&&!v[0]&&!w?e.c=e.e=e.s=null:(e.s*=g.s,w&&v?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=zn(g.e/14)+zn(e.e/14),e.s*=g.s,(c=w.length)<(d=v.length)&&(f=w,w=v,v=f,o=c,c=d,d=o),o=c+d,f=[];o--;f.push(0));for(m=jn,y=1e7,o=d;--o>=0;){for(n=0,h=v[o]%y,p=v[o]/y|0,i=o+(s=c);i>o;)n=((u=h*(u=w[--s]%y)+(a=p*u+(l=w[s]/y|0)*h)%y*y+f[i]+n)/m|0)+(a/y|0)+p*l,f[i--]=u%m;f[i]=n}return n?++r:f.splice(0,1),L(e,f,r)},h.negated=function(){var e=new I(this);return e.s=-e.s||null,e},h.plus=function(e,t){var n,r=this,o=r.s;if(t=(e=new I(e,t)).s,!o||!t)return new I(NaN);if(o!=t)return e.s=-t,r.minus(e);var i=r.e/14,s=e.e/14,a=r.c,c=e.c;if(!i||!s){if(!a||!c)return new I(o/0);if(!a[0]||!c[0])return c[0]?e:new I(a[0]?r:0*o)}if(i=zn(i),s=zn(s),a=a.slice(),o=i-s){for(o>0?(s=i,n=c):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(t=c.length)<0&&(n=c,c=a,a=n,t=o),o=0;t;)o=(a[--t]=a[t]+c[t]+o)/jn|0,a[t]=jn===a[t]?0:a[t]%jn;return o&&(a=[o].concat(a),++s),L(e,a,s)},h.precision=h.sd=function(e,t){var n,r,o,i=this;if(null!=e&&e!==!!e)return Kn(e,1,$n),null==t?t=m:Kn(t,0,8),B(new I(i),e,t);if(!(n=i.c))return null;if(r=14*(o=n.length-1)+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return e&&i.e+1>r&&(r=i.e+1),r},h.shiftedBy=function(e){return Kn(e,-9007199254740991,9007199254740991),this.times("1e"+e)},h.squareRoot=h.sqrt=function(){var e,t,r,o,i,s=this,a=s.c,c=s.s,u=s.e,l=f+4,d=new I("0.5");if(1!==c||!a||!a[0])return new I(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+P(s)))||c==1/0?(((t=qn(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=zn((u+1)/2)-(u<0||u%2),r=new I(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new I(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=d.times(i.plus(n(s,i,l,1))),qn(i.c).slice(0,c)===(t=qn(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(o||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(B(r,r.e+f+2,1),e=!r.times(r).eq(s));break}if(!o&&(B(i,i.e+f+2,0),i.times(i).eq(s))){r=i;break}l+=4,c+=4,o=1}return B(r,r.e+f+1,m,e)},h.toExponential=function(e,t){return null!=e&&(Kn(e,0,$n),e++),k(this,e,t,1)},h.toFixed=function(e,t){return null!=e&&(Kn(e,0,$n),e=e+this.e+1),k(this,e,t)},h.toFormat=function(e,t,n){var r,o=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=_;else if("object"!=typeof n)throw Error(Rn+"Argument not an object: "+n);if(r=o.toFixed(e,t),o.c){var i,s=r.split("."),a=+n.groupSize,c=+n.secondaryGroupSize,u=n.groupSeparator||"",l=s[0],d=s[1],h=o.s<0,p=h?l.slice(1):l,f=p.length;if(c&&(i=a,a=c,c=i,f-=i),a>0&&f>0){for(i=f%a||a,l=p.substr(0,i);i<f;i+=a)l+=u+p.substr(i,a);c>0&&(l+=u+p.slice(i)),h&&(l="-"+l)}r=d?l+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):l}return(n.prefix||"")+r+(n.suffix||"")},h.toFraction=function(e){var t,r,o,i,s,a,c,u,l,d,h,f,y=this,g=y.c;if(null!=e&&(!(c=new I(e)).isInteger()&&(c.c||1!==c.s)||c.lt(p)))throw Error(Rn+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+P(c));if(!g)return new I(y);for(t=new I(p),l=r=new I(p),o=u=new I(p),f=qn(g),s=t.e=f.length-y.e-1,t.c[0]=Vn[(a=s%14)<0?14+a:a],e=!e||c.comparedTo(t)>0?s>0?t:l:c,a=v,v=1/0,c=new I(f),u.c[0]=0;d=n(c,t,0,1),1!=(i=r.plus(d.times(o))).comparedTo(e);)r=o,o=i,l=u.plus(d.times(i=l)),u=i,t=c.minus(d.times(i=t)),c=i;return i=n(e.minus(r),o,0,1),u=u.plus(i.times(l)),r=r.plus(i.times(o)),u.s=l.s=y.s,h=n(l,o,s*=2,m).minus(y).abs().comparedTo(n(u,r,s,m).minus(y).abs())<1?[l,o]:[u,r],v=a,h},h.toNumber=function(){return+P(this)},h.toPrecision=function(e,t){return null!=e&&Kn(e,1,$n),k(this,e,t,2)},h.toString=function(e){var t,n=this,o=n.s,i=n.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=y||i>=g?Hn(qn(n.c),i):Jn(qn(n.c),i,"0"):10===e&&x?t=Jn(qn((n=B(new I(n),f+i+1,m)).c),n.e,"0"):(Kn(e,2,S.length,"Base"),t=r(Jn(qn(n.c),i,"0"),10,e,o,!0)),o<0&&n.c[0]&&(t="-"+t)),t},h.valueOf=h.toJSON=function(){return P(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=t&&I.set(t),I}();new Zn("1e+18");const Xn=t=>{const n=On(32,t),{encode:r,decode:o}=Mn(n),i=n;return i.decode=(t,n)=>{const r=o(t,n);return new e(r)},i.encode=(e,t,n)=>{const o=e.toBuffer();return r(o,t,n)},i};function Qn(e){return new Yn(8,!1,e)}class Yn extends Wt{constructor(e,t,n){super(e,n),this.blob=On(e),this.signed=t}encode(e,t,n=0){return this.signed&&(e=e.toTwos(8*this.span)),this.blob.encode(e.toArrayLike(Buffer,"le",this.span),t,n)}decode(e,t=0){const n=new u(this.blob.decode(e,t),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}}class er{constructor(e){}async encode(e,t){if("swap"===e){const e=Buffer.alloc(324),n=tr.encode(t,e);return e.slice(0,n)}throw new Error(`Invalid account name: ${e}`)}decode(e,t){return this.decodeUnchecked(e,t)}decodeUnchecked(e,t){if("swap"===e)return function(e){return tr.decode(e)}(t);throw new Error(`Invalid account name: ${e}`)}memcmp(e,t){if("swap"===e)return{dataSize:324};throw new Error(`Invalid account name: ${e}`)}size(e){if("swap"===e.name)return 324;throw new Error(`Invalid account name: ${e.name}`)}}const tr=Ln([Tn("version"),(e=>{const t=Tn(e),{encode:n,decode:r}=Mn(t),o=t;return o.decode=(e,t)=>!!r(e,t),o.encode=(e,t,r)=>{const o=Number(e);return n(o,t,r)},o})("isInitialized"),Tn("bumpSeed"),Xn("tokenProgramId"),Xn("tokenA"),Xn("tokenB"),Xn("poolMint"),Xn("tokenAMint"),Xn("tokenBMint"),Xn("poolFeeAccount"),Ln([Qn("tradeFeeNumerator"),Qn("tradeFeeDenominator"),Qn("ownerTradeFeeNumerator"),Qn("ownerTradeFeeDenominator"),Qn("ownerWithdrawFeeNumerator"),Qn("ownerWithdrawFeeDenominator"),Qn("hostFeeNumerator"),Qn("hostFeeDenominator")],"fees"),Ln([(e=>{const t=Pn(Tn("discriminator"),null,"curveType");return t.addVariant(0,Ln([]),"constantProduct"),t.addVariant(1,Ln([]),"constantPrice"),t.addVariant(2,Ln([]),"stable"),t.addVariant(3,Ln([]),"offset"),t})(),Bn(Tn(),32,"calculator")],"swapCurve")]);class nr{constructor(e){}decode(e){throw new Error("SplTokenSwap program does not have events")}}class rr{constructor(e){}encode(e,t){switch(e){case"initialize":return function({fees:e,swapCurve:t}){return ir({initialize:{fees:e,swapCurve:t}},65+(()=>{switch(Object.keys(t.curveType)[0]){case"constantProduct":case"constantPrice":case"stable":case"offset":return 1}})()+32)}(t);case"swap":return function({amountIn:e,minimumAmountOut:t}){return ir({swap:{amountIn:e,minimumAmountOut:t}},17)}(t);case"depositAllTokenTypes":return function({poolTokenAmount:e,maximumTokenAAmount:t,maximumTokenBAmount:n}){return ir({depositAllTokenTypes:{poolTokenAmount:e,maximumTokenAAmount:t,maximumTokenBAmount:n}},25)}(t);case"withdrawAllTokenTypes":return function({poolTokenAmount:e,minimumTokenAAmount:t,minimumTokenBAmount:n}){return ir({withdrawAllTokenTypes:{poolTokenAmount:e,minimumTokenAAmount:t,minimumTokenBAmount:n}},25)}(t);case"depositSingleTokenTypeExactAmountIn":return function({sourceTokenAmount:e,minimumPoolTokenAmount:t}){return ir({depositSingleTokenTypeExactAmountIn:{sourceTokenAmount:e,minimumPoolTokenAmount:t}},17)}(t);case"withdrawSingleTokenTypeExactAmountOut":return function({destinationTokenAmount:e,maximumPoolTokenAmount:t}){return ir({withdrawSingleTokenTypeExactAmountOut:{destinationTokenAmount:e,maximumPoolTokenAmount:t}},17)}(t);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(e,t){throw new Error("SplTokenSwap does not have state")}}const or=Pn(Tn("instruction"));function ir(e,t){const n=Buffer.alloc(t);return or.encode(e,n),n}or.addVariant(0,Ln([Ln([Qn("tradeFeeNumerator"),Qn("tradeFeeDenominator"),Qn("ownerTradeFeeNumerator"),Qn("ownerTradeFeeDenominator"),Qn("ownerWithdrawFeeNumerator"),Qn("ownerWithdrawFeeDenominator"),Qn("hostFeeNumerator"),Qn("hostFeeDenominator")],"fees"),Ln([(e=>{const t=Pn(Tn("discriminator"),null,"curveType");return t.addVariant(0,Ln([]),"constantProduct"),t.addVariant(1,Ln([]),"constantPrice"),t.addVariant(2,Ln([]),"stable"),t.addVariant(3,Ln([]),"offset"),t})(),Bn(Tn(),32,"calculator")],"swapCurve")]),"initialize"),or.addVariant(1,Ln([Qn("amountIn"),Qn("minimumAmountOut")]),"swap"),or.addVariant(2,Ln([Qn("poolTokenAmount"),Qn("maximumTokenAAmount"),Qn("maximumTokenBAmount")]),"depositAllTokenTypes"),or.addVariant(3,Ln([Qn("poolTokenAmount"),Qn("minimumTokenAAmount"),Qn("minimumTokenBAmount")]),"withdrawAllTokenTypes"),or.addVariant(4,Ln([Qn("sourceTokenAmount"),Qn("minimumPoolTokenAmount")]),"depositSingleTokenTypeExactAmountIn"),or.addVariant(5,Ln([Qn("destinationTokenAmount"),Qn("maximumPoolTokenAmount")]),"withdrawSingleTokenTypeExactAmountOut");class sr{constructor(e){}encode(e,t){throw new Error("SplTokenSwap does not have state")}decode(e){throw new Error("SplTokenSwap does not have state")}}class ar{constructor(e){}encode(e,t){throw new Error("SplTokenSwap does not have user-defined types")}decode(e,t){throw new Error("SplTokenSwap does not have user-defined types")}}class cr{constructor(e){this.accounts=new er(e),this.events=new nr(e),this.instruction=new rr(e),this.state=new sr(e),this.types=new ar(e)}}const ur=new e("SwapsVeCiPHMUAtzQWZw7RjsKjgCjhwU55QGu4U1Szw");function lr(e){var t;return new Vt(dr,null!==(t=null==e?void 0:e.programId)&&void 0!==t?t:ur,null==e?void 0:e.provider,new cr(dr))}const dr={version:"3.0.0",name:"spl_token_swap",instructions:[{name:"initialize",accounts:[{name:"swap",isMut:!0,isSigner:!0},{name:"authority",isMut:!1,isSigner:!1},{name:"tokenA",isMut:!1,isSigner:!1},{name:"tokenB",isMut:!1,isSigner:!1},{name:"pool",isMut:!0,isSigner:!1},{name:"fee",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"fees",type:{defined:"Fees"}},{name:"swapCurve",type:{defined:"SwapCurve"}}]},{name:"swap",accounts:[{name:"swap",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"source",isMut:!0,isSigner:!1},{name:"swapSource",isMut:!0,isSigner:!1},{name:"swapDestination",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"poolMint",isMut:!0,isSigner:!1},{name:"poolFee",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"amountIn",type:"u64"},{name:"minimumAmountOut",type:"u64"}]},{name:"depositAllTokenTypes",accounts:[{name:"swap",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"depositTokenA",isMut:!0,isSigner:!1},{name:"depositTokenB",isMut:!0,isSigner:!1},{name:"swapTokenA",isMut:!0,isSigner:!1},{name:"swapTokenB",isMut:!0,isSigner:!1},{name:"poolMint",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"poolTokenAmount",type:"u64"},{name:"maximumTokenAAmount",type:"u64"},{name:"maximumTokenBAmount",type:"u64"}]},{name:"withdrawAllTokenTypes",accounts:[{name:"swap",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"poolMint",isMut:!0,isSigner:!1},{name:"source",isMut:!0,isSigner:!1},{name:"swapTokenA",isMut:!0,isSigner:!1},{name:"swapTokenB",isMut:!0,isSigner:!1},{name:"destinationTokenA",isMut:!0,isSigner:!1},{name:"destinationTokenB",isMut:!0,isSigner:!1},{name:"feeAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"poolTokenAmount",type:"u64"},{name:"minimumTokenAAmount",type:"u64"},{name:"minimumTokenBAmount",type:"u64"}]},{name:"depositSingleTokenTypeExactAmountIn",accounts:[{name:"swap",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"sourceToken",isMut:!0,isSigner:!1},{name:"swapTokenA",isMut:!0,isSigner:!1},{name:"swapTokenB",isMut:!0,isSigner:!1},{name:"poolMint",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"sourceTokenAmount",type:"u64"},{name:"minimumPoolTokenAmount",type:"u64"}]},{name:"withdrawSingleTokenTypeExactAmountOut",accounts:[{name:"swap",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"poolMint",isMut:!0,isSigner:!1},{name:"poolTokenSource",isMut:!0,isSigner:!1},{name:"swapTokenA",isMut:!0,isSigner:!1},{name:"swapTokenB",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"feeAccount",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"destinationTokenAmount",type:"u64"},{name:"maximumPoolTokenAmount",type:"u64"}]}],accounts:[{name:"swap",type:{kind:"struct",fields:[{name:"version",type:"u8"},{name:"isInitialized",type:"bool"},{name:"bumpSeed",type:"u8"},{name:"tokenProgramId",type:"publicKey"},{name:"tokenA",type:"publicKey"},{name:"tokenB",type:"publicKey"},{name:"poolMint",type:"publicKey"},{name:"tokenAMint",type:"publicKey"},{name:"tokenBMint",type:"publicKey"},{name:"poolFeeAccount",type:"publicKey"},{name:"fees",type:{defined:"Fees"}},{name:"swapCurve",type:{defined:"SwapCurve"}}]}}],types:[{name:"Fees",type:{kind:"struct",fields:[{name:"tradeFeeNumerator",type:"u64"},{name:"tradeFeeDenominator",type:"u64"},{name:"ownerTradeFeeNumerator",type:"u64"},{name:"ownerTradeFeeDenominator",type:"u64"},{name:"ownerWithdrawFeeNumerator",type:"u64"},{name:"ownerWithdrawFeeDenominator",type:"u64"},{name:"hostFeeNumerator",type:"u64"},{name:"hostFeeDenominator",type:"u64"}]}},{name:"SwapCurve",type:{kind:"struct",fields:[{name:"curveType",type:{defined:"CurveType"}},{name:"calculator",type:{array:["u8",32]}}]}},{name:"StableCurve",type:{kind:"struct",fields:[{name:"amp",type:"u64"}]}},{name:"OffsetCurve",type:{kind:"struct",fields:[{name:"tokenBOffset",type:"u64"}]}},{name:"ConstantProductCurve",type:{kind:"struct",fields:[]}},{name:"ConstantPriceCurve",type:{kind:"struct",fields:[{name:"tokenBPrice",type:"u64"}]}},{name:"CurveType",type:{kind:"enum",variants:[{name:"ConstantProduct"},{name:"ConstantPrice"},{name:"Stable"},{name:"Offset"}]}}],errors:[{code:0,name:"AlreadyInUse",msg:"Swap account already in use"},{code:1,name:"InvalidProgramAddress",msg:"Invalid program address generated from bump seed and key"},{code:2,name:"InvalidOwner",msg:"Input account owner is not the program address"},{code:3,name:"InvalidOutputOwner",msg:"Output pool account owner cannot be the program address"},{code:4,name:"ExpectedMint",msg:"Deserialized account is not an SPL Token mint"},{code:5,name:"ExpectedAccount",msg:"Deserialized account is not an SPL Token account"},{code:6,name:"EmptySupply",msg:"Input token account empty"},{code:7,name:"InvalidSupply",msg:"Pool token mint has a non-zero supply"},{code:8,name:"InvalidDelegate",msg:"Token account has a delegate"},{code:9,name:"InvalidInput",msg:"InvalidInput"},{code:10,name:"IncorrectSwapAccount",msg:"Address of the provided swap token account is incorrect"},{code:11,name:"IncorrectPoolMint",msg:"Address of the provided pool token mint is incorrect"},{code:12,name:"InvalidOutput",msg:"InvalidOutput"},{code:13,name:"CalculationFailure",msg:"General calculation failure due to overflow or underflow"},{code:14,name:"InvalidInstruction",msg:"Invalid instruction"},{code:15,name:"RepeatedMint",msg:"Swap input token accounts have the same mint"},{code:16,name:"ExceededSlippage",msg:"Swap instruction exceeds desired slippage limit"},{code:17,name:"InvalidCloseAuthority",msg:"Token account has a close authority"},{code:18,name:"InvalidFreezeAuthority",msg:"Pool token mint has a freeze authority"},{code:19,name:"IncorrectFeeAccount",msg:"Pool fee token account incorrect"},{code:20,name:"ZeroTradingTokens",msg:"Given pool token amount results in zero trading tokens"},{code:21,name:"FeeCalculationFailure",msg:"Fee calculation failed due to overflow, underflow, or unexpected 0"},{code:22,name:"ConversionFailure",msg:"Conversion to u64 failed with an overflow or underflow"},{code:23,name:"InvalidFee",msg:"The provided fee does not match the program owner's constraints"},{code:24,name:"IncorrectTokenProgramId",msg:"The provided token program does not match the token program expected by the swap"},{code:25,name:"UnsupportedCurveType",msg:"The provided curve type is not supported by the program owner"},{code:26,name:"InvalidCurve",msg:"The provided curve parameters are invalid"},{code:27,name:"UnsupportedCurveOperation",msg:"The operation cannot be performed on the given curve"}]};export{ur as SPL_TOKEN_SWAP_PROGRAM_ID,lr as splTokenSwapProgram};
//# sourceMappingURL=index.js.map
